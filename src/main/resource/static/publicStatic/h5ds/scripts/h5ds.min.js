/** H5DS v1.0 by 馒头 qq：676015863 */function jumpToPage(){}function showMap(){}function showMovie(){}define("animates",[],function(a,b,c){b.animates={show:'			<li data="" name="无动画">无动画</li>			<li data="animated bounceIn" name="反弹">反弹</li>            <li data="animated bounceInDown" name="下落反弹">下反弹</li>            <li data="animated bounceInLeft" name="向左反弹">左反弹</li>            <li data="animated bounceInRight" name="向右反弹">右反弹</li>            <li data="animated bounceInUp" name="向上反弹">上反弹</li>                        <li data="animated fadeIn" name="渐显进入">渐显</li>            <li data="animated fadeInDown" name="往下渐显进入">下渐显</li>            <li data="animated fadeInDownBig" name="往下渐显进入（快）">下渐快</li>            <li data="animated fadeInLeft" name="往左渐显进入">左渐显</li>            <li data="animated fadeInLeftBig" name="往左渐显进入（快）">左渐快</li>            <li data="animated fadeInRight" name="往右渐显进入">右渐显</li>            <li data="animated fadeInRightBig" name="往右渐显进入（快）">右渐快</li>            <li data="animated fadeInUp" name="往上渐显进入">上渐显</li>            <li data="animated fadeInUpBig" name="往上渐显进入（快）">上渐快</li>                        <li data="animated flip" name="3D翻转">3D翻转</li>            <li data="animated flipInX" name="沿X轴翻开">X轴翻开</li>            <li data="animated flipInY" name="沿Y轴翻开">Y轴翻开</li>                        <li data="animated lightSpeedIn" name="光速进入">光速</li>            <li data="animated rotateIn" name="旋转进入">旋转</li>                        <li data="animated rotateInDownLeft" name="从左上弧线进入">左上弧</li>            <li data="animated rotateInDownRight" name="从右上弧线进入">右上弧</li>            <li data="animated rotateInUpLeft" name="从左下弧线进入">左下弧</li>            <li data="animated rotateInUpRight" name="从右下弧线进入">右下弧</li>                        <li data="animated rollIn" name="滚入">滚入</li>                        <li data="animated zoomIn" name="放大进入">放大</li>            <li data="animated zoomInDown" name="向下放大进入">下放大</li>            <li data="animated zoomInLeft" name="向右放大进入">右放大</li>            <li data="animated zoomInRight" name="向左放大进入">左放大</li>            <li data="animated zoomInUp" name="向上放大进入">上放大</li>                        <li data="animated slideInDown" name="向下滑入">向下滑</li>            <li data="animated slideInLeft" name="向左滑入">向左滑</li>            <li data="animated slideInRight" name="向右滑入">向右滑</li>            <li data="animated slideInUp" name="向上滑入">向上滑</li>                        <li data="pt-page-moveFromLeft" name="从左滑入">左滑入</li>            <li data="pt-page-moveFromRight" name="从右滑入">右滑入</li>            <li data="pt-page-moveFromTop" name="向上滑入">上滑入</li>            <li data="pt-page-moveFromBottom" name="向下滑入">下滑入</li>                        <li data="pt-page-scaleUp" name="变大（渐显）">变大</li>            <li data="pt-page-scaleUpDown" name="大变正常-渐显">大变正</li>                        <li data="pt-page-flipInBottom" name="向上翻转-渐显">上翻转</li>            <li data="pt-page-flipInLeft" name="向左翻转-渐显">左翻转</li>                        <li data="pt-page-rotateInNewspaper" name="旋转-渐显">旋转</li>                        <!-- pull -->            <li data="pt-page-rotatePullRight" name="右翻入-渐显">右翻入</li>            <li data="pt-page-rotatePullLeft" name="左翻入-渐显">左翻入</li>            <li data="pt-page-rotatePullTop" name="上翻入-渐显">上翻页</li>            <li data="pt-page-rotatePullBottom" name="下翻入-渐显">下翻入</li>                        <li data="pt-page-rotateCarouselLeftIn" name="右变大-显示">右变大</li>            <li data="pt-page-rotateCarouselRightIn" name="左变大-显示">左变大</li>            <li data="pt-page-rotateCarouselTopIn" name="往上变大-显示">上变大</li>            <li data="pt-page-rotateCarouselBottomIn" name="往下变大-显示">下变大</li>                        <li data="pt-page-rotateSlideIn" name="向左滑入-渐显">左滑入</li>',hide:'			<li data="" name="无动画">无动画</li>			<li data="animated bounceOut" name="弹出">弹出</li>            <li data="animated bounceOutDown" name="往下弹出">往下弹</li>            <li data="animated bounceOutLeft" name="往左弹出">往左弹</li>            <li data="animated bounceOutRight" name="往右弹出">往右弹</li>            <li data="animated bounceOutUp" name="往上弹出">往上弹</li>                        <li data="animated fadeOut" name="渐渐消失">渐消失</li>            <li data="animated fadeOutDown" name="往下渐渐消失">往下渐</li>            <li data="animated fadeOutDownBig" name="往下渐渐消失（快）">往下快</li>            <li data="animated fadeOutLeft" name="往左渐渐消失">往左渐</li>            <li data="animated fadeOutLeftBig" name="往左渐渐消失（快）">往左快</li>            <li data="animated fadeOutRight" name="往右渐渐消失">往右渐</li>            <li data="animated fadeOutRightBig" name="往右渐渐消失（快）">往右快</li>            <li data="animated fadeOutUp" name="往上渐渐消失">往上渐</li>            <li data="animated fadeOutUpBig" name="往上渐渐消失（快）">往上快</li>                        <li data="animated flipOutX" name="沿X轴翻出">X轴翻出</li>            <li data="animated flipOutY" name="沿Y轴翻出">Y轴翻出</li>                        <li data="animated lightSpeedOut" name="光束离开">光束离</li>            <li data="animated rotateOut" name="旋转消失">旋转隐</li>                        <li data="animated rotateOutDownLeft" name="从左上弧线离开">左上弧</li>            <li data="animated rotateOutDownRight" name="从右上弧线离开">右上弧</li>            <li data="animated rotateOutUpLeft" name="从左下弧线离开">左下弧</li>            <li data="animated rotateOutUpRight" name="从右下弧线离开">右下弧</li>                        <li data="animated hinge" name="掉链子">掉链子</li>            <li data="animated rollOut" name="滚出">滚出</li>                        <li data="animated zoomOut" name="缩小离开">缩小</li>            <li data="animated zoomOutDown" name="向下缩小离开">下缩小</li>            <li data="animated zoomOutLeft" name="向左缩小离开">左缩小</li>            <li data="animated zoomOutRight" name="向右缩小离开">右缩小</li>            <li data="animated zoomOutUp" name="向上缩小离开">上缩小</li>                        <li data="animated slideOutDown" name="向下滑出">下滑出</li>            <li data="animated slideOutLeft" name="向左滑出">左滑出</li>            <li data="animated slideOutRight" name="向右滑出">右滑出</li>            <li data="animated slideOutUp" name="向上滑出">上滑出</li>                        <li data="pt-page-moveToLeft" name="从左滑出">左滑出</li>            <li data="pt-page-moveToRight" name="从右滑出">右滑出</li>            <li data="pt-page-moveToTop" name="向上滑出">上滑出</li>            <li data="pt-page-moveToBottom" name="向下滑出">下滑出</li>                        <li data="pt-page-fade" name="渐隐藏">渐隐藏</li>                        <li data="pt-page-moveToLeftFade" name="从左滑出-渐隐">向左滑</li>            <li data="pt-page-moveToRightFade" name="从右滑出-渐隐">从右滑</li>            <li data="pt-page-moveToTopFade" name="向上滑出-渐隐">向上滑</li>            <li data="pt-page-moveToBottomFade" name="向下滑出-渐隐">向下滑</li>                        <li data="pt-page-moveToLeftEasing" name="向左滑出-Easing">向左滑</li>            <li data="pt-page-moveToRightEasing" name="向右滑出-Easing">向右滑</li>            <li data="pt-page-moveToTopEasing" name="向上滑出-Easing">向上滑</li>            <li data="pt-page-moveToBottomEasing" name="向下滑出-Easing">向下滑</li>                        <li data="pt-page-scaleDown" name="缩小（渐隐）">缩小</li>            <li data="pt-page-scaleDownUp" name="正常变大-渐隐">变大</li>            <li data="pt-page-scaleDownCenter" name="居中缩小-渐隐">中缩小</li>            <li data="pt-page-scaleUpCenter" name="变大-渐隐">变大2</li>                        <li data="pt-page-rotateRightSideFirst" name="向左压缩变小（渐隐）">左缩小</li>            <li data="pt-page-rotateLeftSideFirst" name="向右压缩变小-渐隐">右缩小</li>            <li data="pt-page-rotateTopSideFirst" name="向下压缩变小-渐隐">下缩小</li>            <li data="pt-page-rotateBottomSideFirst" name="向上压缩变小-渐隐">上缩小</li>                        <li data="pt-page-flipOutRight" name="向右翻转（渐隐）">右翻转</li>            <li data="pt-page-flipOutTop" name="向下翻转-渐隐">下翻转</li>                        <li data="pt-page-rotateFall" name="掉落下去">掉落下去</li>                        <li data="pt-page-rotateOutNewspaper" name="旋转-渐隐">旋转</li>                        <li data="pt-page-moveFromLeftFade" name="从左滑入-渐隐藏">向左滑</li>            <li data="pt-page-moveFromRightFade" name="从右滑入-渐隐藏">从右滑</li>            <li data="pt-page-moveFromTopFade" name="向上滑入-渐隐藏">向上滑</li>            <li data="pt-page-moveFromBottomFade" name="向下滑入-渐隐藏">向下滑</li>                        <!-- push -->			<li data="pt-page-rotatePushLeft" name="左翻页-渐隐">左翻页</li>            <li data="pt-page-rotatePushRight" name="右翻页-渐隐">右翻页</li>            <li data="pt-page-rotatePushTop" name="上翻页-渐隐">上翻页</li>            <li data="pt-page-rotatePushBottom" name="下翻页-渐隐">下翻页</li>						<!-- carousel -->            <li data="pt-page-rotateCarouselLeftOut" name="左缩小-渐隐">左缩小</li>            <li data="pt-page-rotateCarouselRightOut" name="右缩小-渐隐">右缩小</li>            <li data="pt-page-rotateCarouselTopOut" name="往上变大-渐隐">上变大</li>            <li data="pt-page-rotateCarouselBottomOut" name="往下变大-渐隐">下变大</li>            			<!-- side -->            <li data="pt-page-rotateSlideOut" name="向左滑出-渐隐">左滑出</li>',other:'			<li data="" name="无动画">无动画</li>            <li data="animated bounce" name="抖动">抖动</li>            <li data="animated flash" name="闪动">闪动</li>            <li data="animated pulse" name="停顿">停顿</li>            <li data="animated rubberBand" name="弹性">弹性</li>            <li data="animated shake" name="摇一摇">摇一摇</li>			<li data="animated swing" name="摇摆">摇摆</li>            <li data="animated tada" name="嘚瑟">嘚瑟</li>            <li data="animated wobble" name="摆动">摆动</li>            <li data="animated rollOneCount" name="旋转（快>慢）">旋转</li>            <li data="animated rollInfinite" name="匀速转动">匀速转</li>                        <li data="pt-page-moveIconUp" name="渐入渐出（循环）">渐入出</li>            <li data="pt-page-moveCircle" name="弹性下落">弹下落</li>'}}),define("appBasicSet",["ifunction","objConfig"],function(a,b,c){var d=(a("ifunction"),a("objConfig")),e=function(){var a=function(){var a=$("#coolapp");"undefined"==typeof _weixinData&&(_weixinData={name:"coolapp 最强的H5编辑器",describe:"免费，开源，可下载！超级强大，灰常给力！",img:"/Public/coolapp/images/wx.jpg"}),$("#appset_name_val").val(_weixinData.name),$("#appset_info_val").html(_weixinData.describe),$("#appset_main_pic").attr("src",_weixinData.img);var b=$(".coolappSong_mobile").attr("src");""!=b&&($("#appset_music_val").val(b),$("#coolappSong").attr("src",b),$("#soundbox").css("display","block"));var c=a.attr("data-slider"),d=a.attr("data-sliderDire"),e=$("#appset_cpage_ul");e.find("li").removeClass("active"),e.find("li[data-slider="+d+"][data-value="+c+"]").addClass("active"),$("#appset_cpage_dialog").attr({"data-sliderType":c,"data-sliderDire":d});var f={color:"inherit",repeat:"inherit",src:"inherit"},g=$("#cpageBackgroundRepeat");switch(f.color=a.css("background-color").colorHex(),$("#cpageBackgroundColor").val(f.color),a.css("background-repeat")){case"repeat":g.find("option[value='repeat']").attr("selected",!0),f.repeat="repeat";break;case"repeat-x":g.find("option[value='repeat-x']").attr("selected",!0),f.repeat="repeat-x";break;case"repeat-y":g.find("option[value='repeat-y']").attr("selected",!0),f.repeat="repeat-y";break;case"no-repeat":g.find("option[value='no-repeat']").attr("selected",!0),f.repeat="no-repeat"}f.src=a.css("background-image").replace("url(","").replace(")",""),$("#cpageBackgroundImage").attr("src",f.src),$("#cPhoneEdit").css({"background-color":f.color,"background-repeat":f.repeat,"background-image":"url('"+f.src+"')"}),"true"==a.attr("data-cayica")&&$("#appset_clear_switch").attr("class","switch on")};a(),$(".setWindowBox h1").dragMt({dragParent:!0}),$("#changeAppMainImage").on("click",function(){d.obj.selectImgResourcesLock=1,$("#resources_btn").trigger("click")}),$("#changeCpageBackgroundImage").on("click",function(){d.obj.selectImgResourcesLock=2,$("#resources_btn").trigger("click")}),$("#changeCpageBackgroundImageClear").on("click",function(){d.obj.$cPhoneEdit.css("background-image","inherit"),$("#cpageBackgroundImage").attr("src","")}),$("#changeCayicaImage").on("click",function(){d.obj.selectImgResourcesLock=3,$("#resources_btn").trigger("click")}),$("#changeCayicaImageClear").on("click",function(){$("#cayicaImage").attr("src","")}),$(".slideSwitch").on("click",".switch",function(){-1!=$(this).attr("class").indexOf("off")?$(this).removeClass("off"):$(this).addClass("off")}),$("#cpageBackgroundColor").on("change",function(){d.obj.$cPhoneEdit.css("background-color",$(this).val().colorHex())}),$("#clear_cpageBackgroundColor").on("click",function(){d.obj.$cPhoneEdit.css("background-color","inherit"),$("#cpageBackgroundColor").val("")}),$("#cpageBackgroundRepeat").on("change",function(){d.obj.$cPhoneEdit.css("background-repeat",$(this).val())});var b=function(a,b){var c=$("#appset_cpage_dialog");c.attr({"data-sliderType":a,"data-sliderDire":b})},c=$("#appset_cpage_ul");c.on("click","li",function(){c.find("li").removeClass("active"),$(this).addClass("active");var a=$(this).attr("data-value"),d=$(this).attr("data-slider");b(a,d)})},f=function(){if($("#cabox")[0]){var a=$("#cabox").attr("databgimg");$("#cayicaImage").attr("src",a)}};f();var g=function(){function a(){var a=function(){c.$song.play(),window.removeEventListener("touchstart",a,!1)};window.addEventListener("touchstart",a,!1)}function b(){c.$song&&(c.$song.play(!0),setTimeout(function(){$("#soundinfo").fadeOut(500)},1e3))}var c={$soundbox:$("#soundbox"),$soundinfo:$("#soundinfo"),$song:document.getElementById("coolappSong"),$coolappSong:$("#coolappSong"),soundIcoFade:function(a){c.$soundinfo.html(a).fadeIn(),c.$soundbox.off("click"),setTimeout(function(){c.$soundinfo.fadeOut(500),c.iniBindToggle()},500)},offOrOnSound:function(a){a&&("on"==a.attr("data")?(a.removeClass("soundbox").addClass("soundbox-close").attr("data","off"),c.soundIcoFade("关闭"),c.$song.pause()):(a.removeClass("soundbox-close").addClass("soundbox").attr("data","on"),c.soundIcoFade("开启"),c.$song.play()))},iniBindToggle:function(){""==c.$coolappSong.attr("src")?c.$soundbox.css("display","none"):c.$soundbox.css("display","block"),c.$soundbox.click(function(){c.offOrOnSound($(this))})}};c.iniBindToggle(),b(),a(),$("#appset_music_switch").on("click",function(){var a=$(this).attr("class");-1!=a.indexOf("off")?(c.$soundbox.css("display","block"),c.$song.play()):(c.$soundbox.css("display","none"),c.$song.pause())}),$("#appset_music_val").on("change",function(){c.$coolappSong.attr("src",$(this).val())});var d=function(){$.ajax({url:"/app/findMusic",type:"post",dataType:"json",success:function(a){for(var b='<option value="">选择音乐</option>',d=0;d<a.length;d++)b+='<option value="'+a[d].filePath+'">'+a[d].musicName+"</option>";$("#select_appset_music_val").html(b),$("#select_appset_music_val").on("change",function(){var a=$(this).val();c.$coolappSong.attr("src",a),$("#appset_music_val").attr("value",a).val(a)})}})};d()};b.iniAppBasicSet=function(){e(),g()}}),define("appSave",["objConfig","ifunction"],function(a,b,c){var d=a("objConfig"),e=(a("ifunction"),0),f=function(){$("#saveCoolApp,#publishCoolApp").on("click",function(){var a={name:"icoolapp.cn",describe:"最强大的HTML5在线编辑器",img:"",music:"",slideDirection:"updown",backgroundColor:"inherit",backgroundRepeat:"inherit",backgroundImg:"inherit",cayica:""};a.name=$("#appset_name_val").val(),a.describe=$("#appset_info_val").val(),a.img=$("#appset_main_pic").attr("src"),-1==$("#appset_music_switch").attr("class").indexOf("off")&&(a.music=$("#appset_music_val").val());var b=$("#appset_cpage_dialog");if(a.slideDirection=b.attr("data-sliderDire"),"updown"==a.slideDirection)var c='<script>var sideWipeType = "updown";</script><script src="/publicStatic/appRes/js/index_updown.js"></script>',f="updown";else var c='<script>var sideWipeType = "leftRight";</script><script src="/publicStatic/appRes/js/index_leftright.js"></script>',f="leftright";switch(b.attr("data-sliderType")){case"1":d.obj.slide=d.obj.slider.slide1,d.obj.slideNo=1;break;case"2":d.obj.slide=d.obj.slider.slide2,d.obj.slideNo=2;break;case"3":d.obj.slide=d.obj.slider.slide3,d.obj.slideNo=3;break;case"4":d.obj.slide=d.obj.slider.slide4,d.obj.slideNo=4;break;case"5":d.obj.slide=d.obj.slider.slide5,d.obj.slideNo=5;break;case"6":d.obj.slide=d.obj.slider.slide6,d.obj.slideNo=6;break;case"7":d.obj.slide=d.obj.slider.slide7,d.obj.slideNo=7;break;case"8":d.obj.slide=d.obj.slider.slide8,d.obj.slideNo=8;break;case"9":d.obj.slide=d.obj.slider.slide9,d.obj.slideNo=9}var g=$("#cPhoneEdit");a.backgroundColor=g.css("background-color"),a.backgroundRepeat=g.css("background-repeat"),"none"!=g.css("background-image")&&(a.backgroundImg=g.css("background-image").split("(")[1].split(")")[0]),-1==$("#appset_clear_switch").attr("class").indexOf("off")&&(a.cayica=$("#cayicaImage").attr("src"));var h="",i="false";""!=a.cayica&&(h='<div class="cabox" id="cabox" dataBgImg="'+a.cayica+'">	<canvas id="cas"></canvas></div><script src="/publicStatic/appRes/js/caimg.js"></script>',i="true");var j="",k="false";""!=a.music&&(j='<div class="soundbox" id="soundbox" data="on">    <em class="c1"></em>    <em class="c2"></em>    <div class="soundico"></div>    <audio id="coolappSong" class="coolappSong_mobile" style="display:none; visibility:hidden;" src="'+a.music+'" loop></audio></div><div class="soundinfo" id="soundinfo">关闭</div>',k="true");var l="";l+="<!--H5DS在线编辑平台：www.h5ds.cn ，请勿删掉该代码！谢谢支持！--><!DOCTYPE html>",l+='<html lang="zh-cn" class="no-js">',l+="		<head>",l+='			<meta http-equiv="Content-Type">',l+='			<meta content="text/html; charset=utf-8">',l+='			<meta charset="utf-8">',l+="			<title>"+a.name+"</title>",l+='			<meta name="format-detection" content="telephone=no">',l+='			<meta name="format-detection" content="email=no">',l+='			<link rel="stylesheet" type="text/css" href="/publicStatic/appRes/css/effect/style.css">	',l+='			<link rel="stylesheet" type="text/css" href="/publicStatic/appRes/css/animations.css" />',l+='			<link rel="stylesheet" type="text/css" href="/publicStatic/appRes/css/animate.css">',l+='		    <script src="/publicStatic/appRes/js/zepto.min.js"></script>',l+='			<script src="http://res.wx.qq.com/open/js/jweixin-1.0.0.js"></script>',l+='			<script src="/publicStatic/appRes/js/qrcode.min.js"></script>',l+='			<script src="/publicStatic/appRes/js/touch.js"></script>',l+='			<script type="text/javascript" src="http://api.map.baidu.com/api?v=1.4"></script>',l+="		</head>",l+="<body>",l+='<div class="loading" id="loading"><div class="load2"></div>已加载:<span id="loadnum"></span></div>',l+='<div id="coolapp" onselectstart="return true;" ondragstart="return false;" data-sliderDire="'+f+'" data-music="'+k+'" data-slider="'+d.obj.slideNo+'" data-cayica="'+i+'" style="background-image:url('+a.backgroundImg+"); background-repeat:"+a.backgroundRepeat+"; background-color:"+a.backgroundColor.colorHex()+';" >',$("#pageListUl li").each(function(a,b){var c=$(this).find("input");l+=0==a?'<div class="page page-'+(a+1)+'-1 page-current" pageName="'+c.val()+'">'+c.attr("data-html")+"</div>":'<div class="page page-'+(a+1)+'-1 hide" pageName="'+c.val()+'">'+c.attr("data-html")+"</div>"}),l+="</div>",l+=j,l+='	<script>var _weixinData = { name:"'+a.name+'", describe:"'+a.describe+'", img:"'+a.img+'"};</script>',l+='	<div class="coolapp_map"><a class="coolapp_map_close" href="javascript:;">关闭</a><div class="coolapp_map_title"><i class="ico"></i><span class="title">地点名称</span><span class="bg"></span></div><div id="coolapp_map"></div></div>',l+=h,l+="</body>",l+="	<script>"+d.obj.slide+"</script>"+c,l+="</html>";var m=$("#fixedBox"),n=$("#infoBox");m.fadeIn(1e3);var o=$(this).attr("data-app");"save"==o?(n.html("保存中...").fadeIn(1e3),$.ajax({url:"/app/saveHtml",data:{appId:d.obj.userAppId,html:l},dataType:"json",type:"post",success:function(a){a?(n.html("保存成功！"),m.fadeOut(500),n.fadeOut(1e3),e=1):(n.html("保存失败！"),m.fadeOut(500),n.fadeOut(1e3))}})):"publish"==o&&(n.html("发布中...").show(),$.ajax({url:"/app/publishApp",data:{appId:d.obj.userAppId,html:l},dataType:"json",type:"post",success:function(a){1==a?(n.html("发布成功！"),m.fadeOut(500),n.fadeOut(1e3),e=1):(n.html("发布失败！"),m.fadeOut(500),n.fadeOut(1e3))}}))})},g=function(){$("#viewCoolApp").showWindow({id:"previewApp"}),$("#viewCoolApp").on("click",function(){$.ajax({url:"/app/previewApp",type:"post",async:!1,data:{appId:d.obj.userAppId},dataType:"json",success:function(a){$("#previewAppIframe").attr("src",a.appHtml),$("#fixedBox").off("click.previewApp").on("click.previewApp",function(){$("#previewApp .close").trigger("click")})}})})};b.appSave=function(){f(),g()}}),define("cutOffRule",[],function(a,b,c){function d(){$("#cutOffRule").on("mousedown",function(a){var b=$("#picList"),c=$("#rdsBody"),d=$("#dataSet"),e=$(this),f={picList_hei:b.height(),rdsBody_hei:c.height(),p_hei:null,r_hei:null,y_start:null,y_end:null,y_move:null,header:40,minHeight:100,top_start:null,top_move:null};f.y_start=a.pageY,f.top_start=e.position().top,$(document).on("mousemove.cutOffRule",function(a){return f.y_move=f.y_start-a.pageY,f.p_hei=f.picList_hei+f.y_move,f.r_hei=f.rdsBody_hei-f.y_move,f.p_hei<f.minHeight?void(f.p_hei=f.minHeight):f.r_hei<f.minHeight?void(f.r_hei=f.minHeight):(b.height(f.p_hei),c.height(f.r_hei),void d.height(f.r_hei+f.header))}).on("mouseup.cutOffRule",function(){$(this).off("mousemove.cutOffRule mouseup.cutOffRule")})})}b.cutOffRule=function(){d()}}),define("functionPlugin",["objConfig","ifunction"],function(a,b,c){var d=a("objConfig"),e=a("ifunction"),f=function(){$("#function_add_jumppage_ul").off("click.jumppage").on("click.jumppage","li",function(){$("#function_add_jumppage_val").val("jumpToPage("+$(this).html()+",this)"),$("#function_add_jumppage_ul li").removeClass("active"),$(this).addClass("active")})},g=function(a){if(void 0!=a.data("name")){var b=a.data("name"),c=$("#function_list"),d=c.find("li"),e=function(a){d.css("display","none").removeClass("active"),$("#function_add_"+a+"_btn").css("display","block").addClass("active")},g={url:function(b){$("#function_add_url_val").val(a.data("url")),e(b)},map:function(b){var c=a.data("set");if(void 0!=c){c=c.split(",");var d=c[0],f=c[1];$("#function_add_map_val").val(c[2]).attr("data-opt",d+","+f)}e(b)},call:function(b){$("#function_add_call_val").val(a.data("url")),e(b)},message:function(b){$("#function_add_message_val").val(a.data("url")),e(b)},movie:function(a){},share:function(a){},jumppage:function(a){f(),e(a)}};switch(b){case"url":g.url("url");break;case"map":g.map("map");break;case"call":g.call("call");break;case"message":g.message("message");break;case"movie":g.movie("movie");break;case"share":g.share("share");break;case"jumppage":g.jumppage("jumppage")}}else{var c=$("#function_list"),d=c.find("li");d.css("display","block").removeClass("active")}},h=function(){function a(a){var b=$("#function_add_"+a+"_btn"),c=function(c){if("yes"==c){var f=$("#function_add_"+a+"_val").val();switch(a){case"url":d.obj.$element.attr("data-url",f),d.obj.$element.attr("data-name","url");break;case"call":d.obj.$element.attr("data-url","tel:"+f),d.obj.$element.attr("data-name","url");break;case"message":d.obj.$element.attr("data-url","sms:"+f),d.obj.$element.attr("data-name","url")}j.css("display","none").removeClass("active"),b.css("display","block").addClass("active"),e.ifun_callback()}};b.find(".btn").showWindow({id:"function_add_"+a+"_dialog",center:!0,callback:c})}function b(a){f();var b=$("#function_add_"+a+"_btn"),c=function(c){if("yes"==c){var f=$("#function_add_"+a+"_val").val();switch(a){case"jumppage":d.obj.$element.attr("onClick",f)}d.obj.$element.attr("data-name",a),j.css("display","none").removeClass("active"),b.css("display","block").addClass("active"),e.ifun_callback()}};b.find(".btn").on("click",function(){var a="",b=$("#pageListUl li").length;for(i=0;i<b;i++)a+="<li>"+(i+1)+"</li>";$("#function_add_jumppage_ul").html(a);var c=d.obj.$element.attr("onClick");if(void 0!=c){var e=c.split(",")[0].split("(")[1];$("#function_add_jumppage_ul li").removeClass("active").eq(e-1).addClass("active"),$("#function_add_jumppage_val").val(c)}}),b.find(".btn").showWindow({id:"function_add_"+a+"_dialog",center:!0,callback:c})}function c(a){var b=$("#function_add_"+a+"_btn"),c=$("#function_add_map_val"),f={lng:0,lat:0,zoom:16,area:"成都"},g=new BMap.Map("function_set_map");g.enableScrollWheelZoom(!0),g.addControl(new BMap.NavigationControl);var h=new BMap.Geolocation;if(h.getCurrentPosition(function(a){if(this.getStatus()==BMAP_STATUS_SUCCESS){var b=new BMap.Marker(a.point);g.addOverlay(b),g.panTo(a.point),f.lng=a.point.lng,f.lat=a.point.lat}else alert("自动定位失败!"+this.getStatus())},{enableHighAccuracy:!0}),void 0!=c.data("opt")){var i=c.data("opt").split(",");f.lng=i[0],f.lat=i[1]}g.centerAndZoom(new BMap.Point(f.lng,f.lat),f.zoom);var k=new BMap.GeolocationControl;k.addEventListener("locationSuccess",function(a){var b="";b+=a.addressComponent.province,b+=a.addressComponent.city,b+=a.addressComponent.district,b+=a.addressComponent.street,b+=a.addressComponent.streetNumber}),k.addEventListener("locationError",function(a){alert(a.message+"请允许浏览器定位！")}),g.addControl(k),g.addEventListener("click",function(a){f.lng=a.point.lng,f.lat=a.point.lat,g.clearOverlays();var b=new BMap.Marker(new BMap.Point(a.point.lng,a.point.lat));g.addOverlay(b)}),$("#searchMap").on("click",function(){var a=$("#function_add_map_val").val();if(-1!=a.indexOf(","))return alert("请勿输入“,”等特殊符号！"),!1;var b=new BMap.LocalSearch(g,{renderOptions:{map:g}});b.search(a);var c=g.getCenter();f.lng=c.lng,f.lat=c.lat,f.area=a});var l=function(c){if("yes"==c){$("#function_add_"+a+"_val").val();d.obj.$element.attr({"data-name":"map",onclick:"showMap(this)","data-set":f.lng+","+f.lat+","+f.area}),j.css("display","none").removeClass("active"),b.css("display","block").addClass("active"),e.ifun_callback()}};b.find(".btn").showWindow({id:"function_add_"+a+"_dialog",center:!0,callback:l})}function g(a){var b=$("#function_add_"+a+"_btn"),c=function(c){if("yes"==c){var f=$("#function_add_"+a+"_val").val();d.obj.$element.attr({"data-url":f,"data-name":"movie",onclick:"showMovie(this)"}),j.css("display","none").removeClass("active"),b.css("display","block").addClass("active"),e.ifun_callback()}};b.find(".btn").showWindow({id:"function_add_"+a+"_dialog",center:!0,callback:c})}var h=$("#function_list"),j=h.find("li");a("url"),a("call"),a("message"),g("movie"),b("jumppage"),c("map"),h.on("click",".del",function(a){j.css("display","block").removeClass("active");var b=$(this),c=b.attr("data-fun"),e={url:function(){d.obj.$element.removeAttr("data-url").removeAttr("data-name"),$("#function_add_url_val").val("http://")},call:function(){d.obj.$element.removeAttr("data-url").removeAttr("data-name"),$("#function_add_call_val").val("")},message:function(){d.obj.$element.removeAttr("data-url").removeAttr("data-name"),$("#function_add_message_val").val("")},delfun:function(a){d.obj.$element.removeAttr("data-name"),d.obj.$element.removeAttr("onClick")},movie:function(){d.obj.$element.removeAttr("data-url").removeAttr("data-name"),d.obj.$element.removeAttr("onClick")}};switch(c){case"url":e.url();break;case"map":e.delfun("map"),d.obj.$element.removeAttr("data-set");break;case"call":e.call();break;case"message":e.message();break;case"movie":e.movie();break;case"share":e.share();break;case"jumppage":e.delfun("jumppage")}a.stopPropagation()})};b.iniPluginDom=function(a){return g(a)},b.iniPluginAction=function(){return h()}}),define("getImgsResources",["objConfig"],function(a,b,c){var d=a("objConfig"),e=$(".imgResourcesBox"),f=function(){$.ajax({url:"/app/findSources",type:"post",data:{appId:d.obj.userAppId,sourceTypeId:1},success:function(a){a=a.sources;var b="";null!=a.returnList&&$.each(a.returnList,function(c){b+="<li><a class='del' data-id='"+a.returnList[c].id+"'><i class='fa fa-close'></i></a><img _src='"+a.returnList[c].sourcePath+"' src='"+a.returnList[c].cutPath+"' realsize='"+a.returnList[c].width+","+a.returnList[c].height+"' data-id='"+a.returnList[c].id+"'/></li>"}),e.eq(0).html(b)}})},g=function(){e.on("click.delSucai",".del",function(a){a.stopPropagation();var b=$(this),c=b.data("id");$.ajax({url:"/app/deleteSource",dataType:"json",type:"post",data:{sourceId:c},success:function(a){1==a.status?b.parent().remove():alert("图片路径不存在，删除失败！")}})})},h=function(){var a=$("#resourcesUlNav");$.ajax({url:"/app/findSourcesType",type:"post",async:!1,dataType:"json",success:function(b){var c='<li data-id="my" class="active">我的上传</li>';b=b.sourceType,null!=b&&$.each(b,function(a){c+="<li data-id='"+b[a].id+"'>"+b[a].sourceTypeName+"</li>"}),a.html(c)}});var b=$("#resourcesPublicBox"),c=$("#resourcesMe");a.on("click","li",function(){var e=$(this);a.find("li").removeClass("active"),e.addClass("active");var f=e.data("id");if("my"==f)b.css("display","none"),c.css("display","block");else{if("1"==e.attr("data-mark")){c.css("display","none");var g=$("#resourcesPublicBox").css("display","block").find("li");return g.css("display","none"),g.each(function(a,b){$(this).attr("data-id")==f&&$(this).css("display","block")}),!1}$.ajax({url:"/app/findSources",data:{appId:d.obj.userAppId,sourceTypeId:f,pageSize:100},dataType:"json",type:"post",success:function(a){var d="";0!=a.sources.returnList.length?($.each(a.sources.returnList,function(b){d+="<li data-id='"+f+"'><img _src='"+a.sources.returnList[b].sourcePath+"' src='"+a.sources.returnList[b].cutPath+"' realsize='"+a.sources.returnList[b].width+","+a.sources.returnList[b].height+"' data-id='"+a.sources.returnList[b].id+"'/></li>"}),c.css("display","none"),b.css("display","block"),b.find("li").css("display","none"),b.append(d),e.attr("data-mark","1")):e.attr("data-mark","1")}})}})};b.getImgsResources=function(){f(),g(),h()}}),define("hideLeft",["sizeConfig"],function(a,b,c){var d=a("sizeConfig"),e=function(){$("#hideLeftButton").click(function(){var a=$(this).attr("data"),b=$("#left"),c=$("#center");"hide"==a?(b.animate({left:-d.size.left_width+"px"}),c.css({width:d.size.wind_width-d.size.right_width,left:0}),$(this).attr("data","show").html(">")):(b.animate({left:0}),c.css({width:d.size.wind_width-d.size.left_width-d.size.right_width,left:d.size.left_width}),$(this).attr("data","hide").html("<"))})};b.hideLeft=function(){e()}}),define("ifunction",["objConfig"],function(require,exports,module){var allObj=require("objConfig"),tipsFadeInAndFadeOut=function(a){var b=$("#infoBox");b.html(a).fadeIn(500),setTimeout(function(){b.fadeOut(500)},1e3)},returnLayers=function(){var a=[];return allObj.obj.$cPhone.find(".layer").each(function(){var b={$this:null},c=$(this);b.$this=c,a.push(b)}),a},dataSynchronization=function(){var a=$("#cPhoneEdit").html();allObj.obj.$page.find("input").attr("data-html",a)},ifun_callback=function(){dataSynchronization()},picListChange=function(start_index,end_index){if(start_index!=end_index){var change={$layers:allObj.obj.$cPhone.find(".layer"),$layer_start:null,$layer_end:null},arr=returnLayers();for(i in arr){var data=eval(arr[i]),zindex=parseInt(data.$this.css("z-index")),eq=parseInt(allObj.obj.maxZIndex-zindex-1),startZindex=parseInt(allObj.obj.maxZIndex-start_index-1);end_index>start_index?(eq>start_index&&end_index>=eq&&data.$this.css("z-index",zindex+1),zindex==startZindex&&data.$this.css("z-index",allObj.obj.maxZIndex-end_index-1)):(start_index>eq&&eq>=end_index&&data.$this.css("z-index",zindex-1),zindex==startZindex&&data.$this.css("z-index",allObj.obj.maxZIndex-end_index-1))}ifun_callback()}},reSetStyle=function(a,b,c){var d={},e="";d.delayTime=allObj.obj.$element.css("-webkit-animation-delay").replace("s",""),d.playTime=allObj.obj.$element.css("-webkit-animation-duration").replace("s",""),d.playCount=allObj.obj.$element.css("-webkit-animation-iteration-count"),d.backgroundColor=allObj.obj.$element.css("background-color"),d.borderRadius=allObj.obj.$element.css("border-radius"),d.boxShadow=allObj.obj.$element.css("-webkit-box-shadow"),d.border=allObj.obj.$element.css("border"),null==a?(e+="-webkit-animation-delay:"+d.delayTime+"s;",e+="-webkit-animation-duration:"+d.playTime+"s;",e+="-webkit-animation-iteration-count:"+d.playCount+";",e+="background-color:"+d.backgroundColor+";",e+="border-radius:"+d.borderRadius+";",e+="-webkit-box-shadow:"+d.boxShadow+";",e+="border:"+d.border+";"):(-1!=a.indexOf("delay")&&(e+="-webkit-animation-delay:"+b+"s;",
e+="-webkit-animation-duration:"+d.playTime+"s;",e+="-webkit-animation-iteration-count:"+d.playCount+";",e+="background-color:"+d.backgroundColor+";",e+="border-radius:"+d.borderRadius+";",e+="-webkit-box-shadow:"+d.boxShadow+";",e+="border:"+d.border+";"),-1!=a.indexOf("count")&&(e+="-webkit-animation-delay:"+d.delayTime+"s;",e+="-webkit-animation-duration:"+d.playTime+"s;",e+="-webkit-animation-iteration-count:"+b+";",e+="background-color:"+d.backgroundColor+";",e+="border-radius:"+d.borderRadius+";",e+="-webkit-box-shadow:"+d.boxShadow+";",e+="border:"+d.border+";"),-1!=a.indexOf("duration")&&(e+="-webkit-animation-delay:"+d.delayTime+"s;",e+="-webkit-animation-duration:"+b+"s;",e+="-webkit-animation-iteration-count:"+d.playCount+";",e+="background-color:"+d.backgroundColor+";",e+="border-radius:"+d.borderRadius+";",e+="-webkit-box-shadow:"+d.boxShadow+";",e+="border:"+d.border+";")),allObj.obj.$element.attr("style",e)},bindSelectImgResources=function(){$(".imgResourcesBox").off("click.selectSucai").on("click.selectSucai","li",function(){var a=$(this).find("img"),b=a.attr("_src");if(1==allObj.obj.selectImgResourcesLock)return $("#appset_main_pic").attr("src",b),$("#resources").hide(),void(allObj.obj.selectImgResourcesLock=0);if(2==allObj.obj.selectImgResourcesLock)return $("#cpageBackgroundImage").attr("src",b),allObj.obj.$cPhoneEdit.css("background-image","url("+b+")"),$("#resources").hide(),void(allObj.obj.selectImgResourcesLock=0);if(3==allObj.obj.selectImgResourcesLock)return $("#cayicaImage").attr("src",b),$("#resources").hide(),void(allObj.obj.selectImgResourcesLock=0);if(4==allObj.obj.selectImgResourcesLock)return allObj.obj.$sliderThisImg.attr("src",b),allObj.obj.$layer.find("li").eq(allObj.obj.$sliderThisImg.parent().index()).find("img").attr("src",b),ifun_callback(),$("#fixedBox").trigger("click"),void(allObj.obj.selectImgResourcesLock=0);if(null!=allObj.obj.$layer&&(void 0!=allObj.obj.$layer[0]&&-1!=allObj.obj.$layer.attr("class").indexOf("layer-pic")||-1!=allObj.obj.$layer.attr("class").indexOf("wrap"))){var c=0;if($("#picviewImgObj").attr("src",b),-1!=allObj.obj.$layer.attr("class").indexOf("wrap"))c=1,allObj.obj.$layer.css("background-image","url("+b+")");else{var d=a.attr("realsize");allObj.obj.$layer.find("img").attr("src",b),allObj.obj.$layer.attr("realsize",d),allObj.obj.$layer.width(d.split(",")[0]),allObj.obj.$layer.height(d.split(",")[1])}allObj.obj.sameIndex=-1,1==c&&$("#layerBg").trigger("click")}allObj.obj.$selectBox.css("display","none"),$("#resources a.close").trigger("click")}),$("#fixedBox").on("click",function(){$("#resources a.close").trigger("click")})},returnLayerByIndex=function(a){var b=allObj.obj.maxZIndex-a-1,c=null;return allObj.obj.$cPhone.find(".layer").each(function(){b==$(this).css("z-index")&&(c=$(this))}),c},rotationDegrees=function(a){var b=a.css("-webkit-transform"),c=0;if("string"==typeof b&&"none"!==b){var d=b.split("(")[1].split(")")[0].split(",");c=d[0]}return c},returnLayerTpye=function(){var a=allObj.obj.$layer.attr("class");return-1!=a.indexOf("layer-pic")?"layer-pic":-1!=a.indexOf("layer-text")?"layer-text":-1!=a.indexOf("layer-slider")?"layer-slider":-1!=a.indexOf("layer-effect")?"layer-effect":-1!=a.indexOf("layer-iframe")?"layer-iframe":-1!=a.indexOf("layer-form")?"layer-form":void alert("没这个类型！")};exports.returnLayers=function(){return returnLayers()},exports.returnLayerByIndex=function(a){return returnLayerByIndex(a)},exports.returnLayerTpye=function(){return returnLayerTpye()},exports.rotationDegrees=function(a){return rotationDegrees(a)},exports.ifun_callback=function(){ifun_callback()},exports.bindSelectImgResources=function(){bindSelectImgResources()},exports.reSetStyle=function(a,b,c){reSetStyle(a,b,c)},exports.tipsFadeInAndFadeOut=function(a){tipsFadeInAndFadeOut(a)},exports.picListChange=function(a,b){picListChange(a,b)}}),define("iniMouseRightBtnEvent",["objConfig","ifunction"],function(a,b,c){var d=a("objConfig"),e=a("ifunction"),f=function(){var a=$(window).height(),b=function(a,b,c){var d=c.find("li"),e=d.length,f=null;return b>=e?(alert("移层失败，已经是最底层了"),!1):0>b?(alert("移层失败，已经是顶层了"),!1):(a!=b&&(f=d.eq(a).prop("outerHTML"),d.eq(a).replaceWith(d.eq(b).prop("outerHTML")),d.eq(b).replaceWith(f)),!0)},c=function(b){$(this).on("contextmenu",function(a){return!1}),3==b.which&&(b.preventDefault(),d.obj.$mouseRightBox_layer.css({left:b.pageX+10,top:a-b.pageY<200?b.pageY-150:b.pageY+10}).show())};d.obj.$picListUl.on("mouseup.rightclick2","li",function(a){c(a)}),d.obj.$cPhone.on("mouseup.rightclick",".layer",function(a){c(a)}),$(document).on("mouseup.iniMouseRightBtnEvent",function(a){$(this).on("contextmenu",function(a){return!1}),3!=a.which&&d.obj.$mouseRightBox.hide()}),d.obj.$pageListUl.on("mouseup","input.name",function(b){3==b.which&&d.obj.$mouseRightBox_page.css({left:b.pageX+10,top:a-b.pageY<200?b.pageY-150:b.pageY+10}).show()});var f=function(){var a=$("#clonePageButton");$("#mrbp-copy").on("click",function(){a.trigger("click")}),$("#mrbp-prev").on("click",function(){var a=$("#pageListUl"),c=a.find(".active").index();b(c,c-1,a)&&e.ifun_callback()}),$("#mrbp-next").on("click",function(){var a=$("#pageListUl"),c=a.find(".active").index();b(c,c+1,a)&&e.ifun_callback()}),$("#mrbp-del").on("click",function(){$("#pageListUl").find(".active .del").trigger("click")}),$("#mrbp-rename").on("click",function(){$("#pageListUl").find(".active .name").trigger("dblclick")});var c=function(a,b){var c=$("#fixedBox"),d=$("#infoBox");$.ajax({url:"/app/saveSingleTemplate",type:"POST",data:{html:a,file:b},beforeSend:function(){d.html("保存中...").fadeIn(1e3)}}).done(function(a){a?(d.html("保存成功！"),c.fadeOut(500),d.fadeOut(1e3),$("#allMobanType").find("li").eq(0).removeAttr("data-lock")):(d.html("保存失败！"),c.fadeOut(500),d.fadeOut(1e3))}).fail(function(){}).always(function(){})};$("#mrbp-saveMoban").on("click",function(){var a=$("#pageListUl").find(".active").find("input").attr("data-html");$("#fixedBox").fadeIn(1e3),html2canvas($("#cPhoneEdit")[0],{allowTaint:!1,taintTest:!1,onrendered:function(b){b.id="saveMobanCanvas";var d=b.toDataURL("image/jpeg",.2);c(a,d)}})})};f();var g=function(){var a=$("#copyLayerButton");$("#mrbl-copy").on("click",function(){a.trigger("click")}),$("#mrbl-top").on("click",function(){var a=$("#picListUl"),c=a.find(".active").index();b(c,0,a)&&(e.picListChange(c,0),e.ifun_callback())}),$("#mrbl-bottom").on("click",function(){var a=$("#picListUl"),c=a.find(".active").index(),d=a.find("li").length;b(c,d-1,a)&&(e.picListChange(c,d-1),e.ifun_callback())}),$("#mrbl-prev").on("click",function(){var a=$("#picListUl"),c=a.find(".active").index();b(c,c-1,a)&&(e.picListChange(c,c-1),e.ifun_callback())}),$("#mrbl-next").on("click",function(){var a=$("#picListUl"),c=a.find(".active").index();b(c,c+1,a)&&(e.picListChange(c,c+1),e.ifun_callback())}),$("#mrbl-del").on("click",function(){$("#picListUl").find(".active .del").trigger("click")}),$("#mrbl-rename").on("click",function(){$("#picListUl").find(".active .name").trigger("dblclick")})};g()};b.iniFun=function(){f()}}),define("iniPageList",["objConfig"],function(a,b,c){var d=a("objConfig"),e=function(){var a=$("#returnData"),b=a.find("#coolapp"),c={$pages:b.find(".page"),num:null,arr:[],music:b.attr("data-music"),slider:b.attr("data-slider"),cayica:b.attr("data-cayica")};if(c.$pages.each(function(){var a={name:$(this).attr("pageName"),content:$(this).html()};c.arr.push('<li>	<a href="javascript:void(0)" class="del"><i class="iconfont icon-close"></i></a>	<div class="dragdiv"><input type="text" value="'+a.name+'" class="name" disabled="" data-html=\''+a.content+"'></div></li>")}),d.obj.$pageListUl.html(c.arr),"true"==c.music){var e=$("#returnData .coolappSong").attr("src");$("#appset_music_val").val(e),$("#coolappSong").attr("src",e)}else $("#coolappSong")[0].pause(),$("#soundbox").css("display","none"),$("#appset_music_switch").addClass("off")};b.iniPageList=function(){e()}}),define("",["objConfig","shortcutsSet","ifunction","animates","layout","sizeConfig","iniPageList","toMaxOrToMin","hideLeft","cutOffRule","pageListEvent","upLoadMoban","selectLayerByLi","mouseEventToDragCallback","layerObj","layerObjPic","layerObjIfun","functionPlugin","layerObjText","layerObjEffect","layerObjSlider","layerObjIframe","mouseEventToDrag","layerAdd","getImgsResources","upLoadImgs","layerObjBackground","appBasicSet","appSave","iniMouseRightBtnEvent"],function(a,b,c){var d=function(b){var c=a("objConfig"),d=a("shortcutsSet"),e=a("animates");$("#show_box").html(e.animates.show),$("#hidde_box").html(e.animates.hide),$("#other_box").html(e.animates.other),$("#clickAnimate_show").html(e.animates.other),$("#clickAnimate_hide").html(e.animates.other),$("#clickAnimate_other").html(e.animates.other),d.iniShortcuts(),a("layout").initPage(),a("iniPageList").iniPageList(),c.obj.$moreSet.css("display","none"),c.obj.$animateSet.css("display","none"),c.obj.$functionSet.css("display","none");var f=function(a,c){b.picListChange(a,c)};c.obj.$pageListUl.dragListMt({callback:null,xfloat:8,liheight:50,yfloat:10}),c.obj.$picListUl.dragListMt({callback:f,xfloat:0,liheight:30,yfloat:10}),a("toMaxOrToMin").toMaxOrToMin(),a("hideLeft").hideLeft(),a("cutOffRule").cutOffRule(),a("pageListEvent").pageListEvent(),a("selectLayerByLi").selectLayerByLi(),a("mouseEventToDrag");var g=$("#rdsHead");g.on("click","a",function(){var a=$(this),b=$("#rdsBody");g.find("a").removeClass("active"),a.addClass("active");var c=a.attr("id"),d=c+"_box";b.find(".hidden").hide(0),b.find("."+d).show(0)});var h=function(){var a={$this:$("#appSet"),$i:$("#appSetHide"),h2Hei:35,hei:null};a.hei=a.$this.height(),a.$this.dragMt(),a.$i.on("click",function(){null==a.$this.data("mark")?(a.$this.animate({height:a.h2Hei}),a.$this.data("mark",1),$(this).removeClass("fa-minus").addClass("fa-chevron-down")):(a.$this.animate({height:a.hei}),a.$this.data("mark",null),$(this).removeClass("fa-chevron-down").addClass("fa-minus"))})};h(),$(document).on("click.clear",function(a){var a=a||window.event,b=a.target||a.srcElement;return"center"==b.id?void c.obj.$selectBox.css("display","none"):void 0}),c.obj.$picListUl.on("click.eye",".eye",function(a){var d=$(this).find("i"),e=$(this).parent().parent().index(),f=b.returnLayerByIndex(e);a.stopPropagation(),d.is(":hidden")?(f.css("display","block"),d.css("display","inline-block")):(f.css("display","none"),d.css("display","none"),c.obj.$selectBox.css("display","none")),b.ifun_callback()}),a("layerAdd").layerAdd(),c.obj.$animateNav.on("click","li",function(){var a=$(this),b="#"+a.attr("data")+"_box";c.obj.$animateNav.find("li").removeClass("active"),a.addClass("active"),c.obj.$animatesUl.addClass("hidden"),$(b).removeClass("hidden")}),$("#seePlay").on("click",function(){c.obj.$selectBox.css("display","none"),c.obj.$cPhoneEdit.hide(0).show(0)}),$("#seeLine").on("click",function(){var a=$("#lineGrid");"none"==a.css("display")?a.css("display","block"):a.css("display","none")});var j=function(a){if("yes"==a){var d={name:$("#appset_name_val").val(),describe:$("#appset_info_val").val(),img:$("#appset_main_pic").attr("src")};$.ajax({type:"post",url:"/app/updateAppsInfo",dataType:"JSON",data:{appId:c.obj.userAppId,title:d.name,description:d.describe,coverPicture:d.img},success:function(a){1==a&&b.tipsFadeInAndFadeOut("设置成功！")}})}};$("#resources_btn").showWindow({id:"resources",center:!1}),$("#appset_name").showWindow({id:"appset_name_dialog",center:!0}),$("#appset_info").showWindow({id:"appset_info_dialog",center:!0,callback:j}),$("#appset_music").showWindow({id:"appset_music_dialog",center:!0}),$("#appset_cpage").showWindow({id:"appset_cpage_dialog",center:!0}),$("#appset_appbg").showWindow({id:"appset_appbg_dialog",center:!0}),$("#appset_clear").showWindow({id:"appset_clear_dialog",center:!0}),$("#function_add_animate_btn").showWindow({id:"setAnimate_clear_dialog",center:!0});var k=$("#getHistoryCoolApp"),l=$("#getHistory_dialog_ul");k.showWindow({id:"getHistory_dialog",center:!0}),k.on("click",function(){$.ajax({url:"/app/findAppHistory",type:"post",async:!1,data:{appId:c.obj.userAppId},dataType:"json",beforeSend:function(){$("#getHistory_dialog_ul").html("数据加载中...")},success:function(a){if(null!=a){var b="";for(i in a)b+="<li>历史记录："+a[i].createTime+'<a class="returnHistory" href="javascript:void(0)" data-id="'+a[i].trackId+'">还原记录</a></li>';$("#getHistory_dialog_ul").html(b),$("#getHistory_dialog").center()}}})}),l.on("click",".returnHistory",function(){var d=$(this).attr("data-id");$("#getHistory_dialog .close").trigger("click"),$.ajax({url:"/app/restoreAppHistory",type:"post",async:!1,data:{appId:c.obj.userAppId,trackId:d},dataType:"json",beforeSend:function(){$("#fixedBox").fadeIn(1e3),$("#infoBox").html("还原中...").fadeIn(1e3)},success:function(c){"1"==c.status?($("#returnData").html(c.appHtml),a("iniPageList").iniPageList(),$("#pageListUl li").eq(0).trigger("click"),b.tipsFadeInAndFadeOut("还原成功")):b.tipsFadeInAndFadeOut("还原失败！"),$("#fixedBox").fadeOut(1e3),$("#infoBox").fadeOut(1e3)}})}),a("getImgsResources").getImgsResources(),a("upLoadImgs").uploadImgs(),a("layerObjBackground").backgroundLayer(),b.bindSelectImgResources(),a("appBasicSet").iniAppBasicSet(),$("#pageListUl li").eq(0).trigger("click"),a("functionPlugin").iniPluginAction(),a("appSave").appSave(),$("#helpCoolApp").on("click",function(){$("#fixedBox").show(),$("#helpCoolApp_html").show()}),$("#helpCoolApp_html").on("click.helpCoolApphtml",function(){$("#fixedBox").hide(),$(this).hide()}),$("#rdsBody").on("mousewheel","input[type=text]",function(a,b){a.preventDefault();var c=$(this),d=c.val()||0;1==b?d++:d>0&&d--,c.val(d).trigger("change")})};$("#fixedBox").fadeIn(1e3),$("#infoBox").html("载入中...").fadeIn(1e3),$(function(){var b=a("ifunction"),c=$("#coolAppAllData").attr("data-userappid");$.ajax({url:"/app/findOneApp",type:"post",async:!1,data:{appId:c},dataType:"json",success:function(c){$("#fixedBox").fadeOut(1e3),"1"==c.status&&""!=c.appHtml?($("#returnData").html(c.appHtml),d(b),b.tipsFadeInAndFadeOut("载入成功!"),a("iniMouseRightBtnEvent").iniFun()):b.tipsFadeInAndFadeOut("载入失败!")}})})}),define("layerAdd",["objConfig","ifunction"],function(a,b,c){var d=a("objConfig"),e=(a("ifunction"),function(){var a=function(){$("#picListUl").find("li").last().trigger("click")};$("#addPicButton").on("click",function(){var b=d.obj._picListUlli;b=b.replace("{{typeico}}",'<i class="fa fa-file-picture-o"></i>'),b=b.replace("{{name}}","图片图层"),$("#picListUl").append(b),$("#cPhoneEdit .wrap").append('<div class="layer layer-pic" name="图片图层" realsize="100,100" style=" border:0; top:10px; left:10px; width:100px; height:100px; z-index:'+(d.obj.maxZIndex-$("#picListUl li").length)+';">   <img class="element" src=""></div>'),a()}),$("#addTextButton").on("click",function(){var b=d.obj._picListUlli;b=b.replace("{{typeico}}",'<i class="fa fa-font"></i>'),b=b.replace("{{name}}","文字图层"),$("#picListUl").append(b),$("#cPhoneEdit .wrap").append('<div class="layer layer-text" name="文字图层" style="text-align: left; font-size:24px; top: 10px; left: 10px; width: 200px; height: 100px; z-index: '+(d.obj.maxZIndex-$("#picListUl li").length)+';">	<div class="element"><div class="el-text">文字内容</div></div></div>'),a()}),$("#addEffectButton").on("click",function(){var b=d.obj._picListUlli;b=b.replace("{{typeico}}",'<i class="fa fa-magic"></i>'),b=b.replace("{{name}}","特效图层"),$("#picListUl").append(b),$("#cPhoneEdit .wrap").append('<div class="layer layer-effect" name="特效图层" style="top: 0; left: 0; z-index: '+(d.obj.maxZIndex-$("#picListUl li").length)+';"></div>'),a()}),$("#addSliderButton").on("click",function(){var b=d.obj._picListUlli;b=b.replace("{{typeico}}",'<i class="fa fa-stack-overflow"></i>'),b=b.replace("{{name}}","幻灯片图层"),$("#picListUl").append(b),$("#cPhoneEdit .wrap").append('<div class="layer layer-slider" name="幻灯片图层" style="top: 0; left: 0; width:640px; height:400px; background-color:#eee; z-index: '+(d.obj.maxZIndex-$("#picListUl li").length)+';"><ul></ul></div>'),a()}),$("#addIframeButton").on("click",function(){var b=d.obj._picListUlli;b=b.replace("{{typeico}}",'<i class="iconfont icon-xinjian"></i>'),b=b.replace("{{name}}","iframe图层"),$("#picListUl").append(b),$("#cPhoneEdit .wrap").append('<div class="layer layer-iframe" name="iframe图层" style="top: 10px; left: 10px; width: 200px; height: 100px; z-index: '+(d.obj.maxZIndex-$("#picListUl li").length)+';">	<div class="element"><div class="iframe-hide"></div><iframe src="" style="width:100%; height:100%;" frameborder="0"></iframe></div></div>'),a()}),$("#copyLayerButton").on("click",function(){if(void 0!=d.obj.$layer[0])if("#cPhoneEdit .wrap"==d.obj.$layer.selector)alert("背景图层不可复制！");else{var b=$("#picListUl");b.append(b.find(".active").clone().removeClass("active")),$("#cPhoneEdit .wrap").append(d.obj.$layer.clone().css("z-index",d.obj.maxZIndex-$("#picListUl li").length)),a()}else alert("请先选择图层！")})});b.layerAdd=function(){e()}}),define("layerObj",["objConfig","ifunction","layerObjPic","layerObjIfun","functionPlugin","shortcutsSet","layerObjText","layerObjEffect","layerObjSlider","layerObjIframe"],function(a,b,c){a("objConfig"),a("ifunction");b.layer={pic:function(b){a("layerObjPic").picLayer(b)},text:function(b){a("layerObjText").textLayer(b)},effect:function(b){a("layerObjEffect").effectLayer(b)},slider:function(b){a("layerObjSlider").sliderLayer(b)},iframe:function(b){a("layerObjIframe").iframeLayer(b)}}}),define("layerObjBackground",["objConfig","ifunction","layerObjIfun","functionPlugin","shortcutsSet"],function(a,b,c){var d=a("objConfig"),e=a("ifunction"),f=(a("layerObjIfun"),function(){$("#layerBg").on("click",function(){var a={typename:"背景图层",name:"背景图层",layerType:"background-layer",backgroundImage:null,backgroundColor:null,backgroundRepeat:null};if(-1==d.obj.sameIndex||-2!=d.obj.sameIndex){d.obj.sameIndex=-2,$("#picListUl li").removeClass("active"),$(this).addClass("active"),d.obj.$layer=d.obj.$cPhoneEdit.find(".wrap"),a.backgroundImage=d.obj.$layer.css("background-image"),a.backgroundColor=d.obj.$layer.css("background-color"),a.backgroundRepeat=d.obj.$layer.css("background-repeat");var b='	<div class="page-background-set"><h5>底&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;色：</h5><input type="color" id="layerBackgroundColor" list="layerBackgroundColor_list" value="{{backgroundcolor}}">			<datalist id="layerBackgroundColor_list">				<option>#FFFFFF</optison>				<option>#000000</optison>				<option>#ffe600</optison>				<option>#bff800</optison>				<option>#7ff201</optison>				<option>#40f200</optison>				<option>#18f218</optison>				<option>#03ce65</optison>				<option>#00a3a2</optison>				<option>#0469df</optison>				<option>#2540ff</optison>				<option>#4d25ff</optison>				<option>#7a14f3</optison>				<option>#be0dbf</optison>				<option>#f10d58</optison>				<option>#ff330e</optison>				<option>#ff6b01</optison>				<option>#ffb202</optison>				<option>#00c0ff</optison>				<option>#1ba1cd</optison>			</datalist> 			<a id="clear_layerBackgroundColor">清除</a>	</div><div class="page-background-set">	<h5>背景模式：</h5>    <div class="s-select" id="backgroundRepeat_select">         <span placeholder="选择下拉" data="repeat" id="playCount_data">平铺</span>         <i class="fa fa-sort-desc"></i>         <ul>             <li data="repeat">平铺</li>             <li data="repeat-x">延X轴平铺</li>             <li data="repeat-y">延Y轴平铺</li>             <li data="no-repeat">不重复</li>         </ul>    </div></div>';b=b.replace("{{backgroundcolor}}",a.backgroundColor.colorHex()),$("#basicSetBox").html(b);var c=d.obj._pageBackground;c=c.replace("{{url}}","none"==a.backgroundImage?"":a.backgroundImage.split("(")[1].split(")")[0]),c=c.replace("{{backgroundrepeat}}",a.backgroundRepeat),d.obj.$basicSet_box_other.css("display","none"),$("#pageBackground").html(c).css("display","block"),d.obj.$selectBox.css("display","none"),d.obj.$basic.trigger("click");var f=$("#layerBackgroundColor");f.on("change",function(){d.obj.$layer.css("background-color",$(this).val().colorHex()),e.ifun_callback()});var g=$("#clear_layerBackgroundColor");g.on("click",function(){f.val("#000000"),d.obj.$layer.css("background-color","initial"),e.ifun_callback()});var h=function(a){d.obj.$layer.css("background-repeat",a),d.obj.$selectBox.css("display","none"),e.ifun_callback()};$("#backgroundRepeat_select").donwSelectMt({callback:h}),$("#changeBackgroundImage").showWindow({id:"resources",center:!1}),$("#changeBackgroundImageClear").on("click",function(){$("#picviewImgObj").attr("src",""),d.obj.$layer.css("background-image","")}),e.ifun_callback(),d.obj.$moreSet.css("display","none"),d.obj.$animateSet.css("display","none"),d.obj.$functionSet.css("display","none")}})});b.backgroundLayer=function(){f()}}),define("layerObjEffect",["objConfig","ifunction","layerObjIfun","functionPlugin","shortcutsSet"],function(a,b,c){var d=a("objConfig"),e=a("ifunction"),f=a("layerObjIfun"),g={moveStar:'<i class="meteor style3" style="left:-160.24px; top:-38.67px; -webkit-animation-delay:2s; -webkit-animation: meteor 2s linear infinite;"></i><i class="meteor style3" style="left:489.10px; top:-57.97px; -webkit-animation-delay:2s; -webkit-animation: meteor 4s linear infinite;"></i><i class="meteor style2" style="left:243.16px; top:-2.25px; -webkit-animation-delay:1s; -webkit-animation: meteor 2s linear infinite;"></i><i class="meteor style2" style="left:193.95px; top:-39.92px; -webkit-animation-delay:2s; -webkit-animation: meteor 2s linear infinite;"></i><i class="meteor style3" style="left:207.38px; top:-65.93px; -webkit-animation-delay:3s; -webkit-animation: meteor 4s linear infinite;"></i><i class="meteor style2" style="left:32.74px; top:-46.92px; -webkit-animation-delay:1s; -webkit-animation: meteor 4s linear infinite;"></i><i class="meteor style3" style="left:359.17px; top:-53.07px; -webkit-animation-delay:1s; -webkit-animation: meteor 3s linear infinite;"></i><i class="meteor style1" style="left:-104.13px; top:-59.52px; -webkit-animation-delay:3s; -webkit-animation: meteor 3s linear infinite;"></i><i class="meteor style3" style="left:50.39px; top:-41.12px; -webkit-animation-delay:1s; -webkit-animation: meteor 3s linear infinite;"></i><i class="meteor style2" style="left:454.27px; top:-5.05px; -webkit-animation-delay:2s; -webkit-animation: meteor 4s linear infinite;"></i><i class="meteor style2" style="left:487.90px; top:-1.41px; -webkit-animation-delay:2s; -webkit-animation: meteor 3s linear infinite;"></i><i class="meteor style2" style="left:-26.12px; top:-72.47px; -webkit-animation-delay:2s; -webkit-animation: meteor 3s linear infinite;"></i><i class="meteor style2" style="left:347.73px; top:-74.57px; -webkit-animation-delay:2s; -webkit-animation: meteor 3s linear infinite;"></i><i class="meteor style2" style="left:-130.31px; top:19.42px; -webkit-animation-delay:1s; -webkit-animation: meteor 4s linear infinite;"></i><i class="meteor style3" style="left:468.83px; top:-51.68px; -webkit-animation-delay:1s; -webkit-animation: meteor 4s linear infinite;"></i><i class="meteor style3" style="left:371.62px; top:-2.64px; -webkit-animation-delay:3s; -webkit-animation: meteor 3s linear infinite;"></i><i class="meteor style4" style="left:487.26px; top:-67.66px; -webkit-animation-delay:1s; -webkit-animation: meteor 2s linear infinite;"></i><i class="meteor style2" style="left:421.05px; top:-67.14px; -webkit-animation-delay:2s; -webkit-animation: meteor 3s linear infinite;"></i><i class="meteor style2" style="left:304.64px; top:2.34px; -webkit-animation-delay:2s; -webkit-animation: meteor 2s linear infinite;"></i><i class="meteor style3" style="left:-40.46px; top:-37.97px; -webkit-animation-delay:2s; -webkit-animation: meteor 2s linear infinite;"></i>',flashStar:'<i class="star style3" style="left:298.77px; top:162.83px; -webkit-animation-delay:0.01s; -webkit-animation: star 2s linear infinite;"></i><i class="star style1" style="left:463.01px; top:312.34px; -webkit-animation-delay:0.56s; -webkit-animation: star 4s linear infinite;"></i><i class="star style4" style="left:408.42px; top:591.52px; -webkit-animation-delay:0.99s; -webkit-animation: star 2s linear infinite;"></i><i class="star style3" style="left:502.12px; top:337.11px; -webkit-animation-delay:0.79s; -webkit-animation: star 2s linear infinite;"></i><i class="star style4" style="left:129.88px; top:139.08px; -webkit-animation-delay:0.67s; -webkit-animation: star 5s linear infinite;"></i><i class="star style1" style="left:380.31px; top:472.50px; -webkit-animation-delay:0.99s; -webkit-animation: star 2s linear infinite;"></i><i class="star style3" style="left:244.16px; top:114.66px; -webkit-animation-delay:0.82s; -webkit-animation: star 4s linear infinite;"></i><i class="star style2" style="left:572.62px; top:160.67px; -webkit-animation-delay:0.05s; -webkit-animation: star 3s linear infinite;"></i><i class="star style3" style="left:492.02px; top:470.52px; -webkit-animation-delay:0.81s; -webkit-animation: star 4s linear infinite;"></i><i class="star style1" style="left:44.05px; top:389.53px; -webkit-animation-delay:0.14s; -webkit-animation: star 2s linear infinite;"></i><i class="star style1" style="left:306.41px; top:227.65px; -webkit-animation-delay:0.81s; -webkit-animation: star 4s linear infinite;"></i><i class="star style2" style="left:203.19px; top:319.32px; -webkit-animation-delay:0.91s; -webkit-animation: star 5s linear infinite;"></i><i class="star style1" style="left:611.96px; top:201.71px; -webkit-animation-delay:0.31s; -webkit-animation: star 4s linear infinite;"></i><i class="star style3" style="left:345.71px; top:231.26px; -webkit-animation-delay:0.96s; -webkit-animation: star 2s linear infinite;"></i><i class="star style2" style="left:291.78px; top:520.11px; -webkit-animation-delay:0.83s; -webkit-animation: star 3s linear infinite;"></i><i class="star style2" style="left:484.89px; top:169.63px; -webkit-animation-delay:0.26s; -webkit-animation: star 3s linear infinite;"></i><i class="star style2" style="left:481.24px; top:567.91px; -webkit-animation-delay:0.65s; -webkit-animation: star 3s linear infinite;"></i><i class="star style3" style="left:496.94px; top:204.20px; -webkit-animation-delay:0.82s; -webkit-animation: star 1s linear infinite;"></i><i class="star style4" style="left:27.45px; top:431.86px; -webkit-animation-delay:0.13s; -webkit-animation: star 4s linear infinite;"></i><i class="star style1" style="left:356.16px; top:138.32px; -webkit-animation-delay:0.63s; -webkit-animation: star 4s linear infinite;"></i><i class="star style4" style="left:509.15px; top:464.47px; -webkit-animation-delay:0.51s; -webkit-animation: star 2s linear infinite;"></i><i class="star style4" style="left:135.58px; top:91.83px; -webkit-animation-delay:0.66s; -webkit-animation: star 3s linear infinite;"></i><i class="star style2" style="left:141.50px; top:76.28px; -webkit-animation-delay:0.94s; -webkit-animation: star 3s linear infinite;"></i><i class="star style2" style="left:475.50px; top:199.76px; -webkit-animation-delay:0.59s; -webkit-animation: star 3s linear infinite;"></i><i class="star style3" style="left:67.35px; top:500.27px; -webkit-animation-delay:0.80s; -webkit-animation: star 4s linear infinite;"></i><i class="star style4" style="left:281.00px; top:21.70px; -webkit-animation-delay:0.93s; -webkit-animation: star 3s linear infinite;"></i><i class="star style2" style="left:276.73px; top:163.27px; -webkit-animation-delay:0.39s; -webkit-animation: star 2s linear infinite;"></i><i class="star style2" style="left:379.77px; top:8.42px; -webkit-animation-delay:0.68s; -webkit-animation: star 4s linear infinite;"></i><i class="star style2" style="left:364.55px; top:326.05px; -webkit-animation-delay:0.63s; -webkit-animation: star 3s linear infinite;"></i><i class="star style4" style="left:110.20px; top:188.01px; -webkit-animation-delay:0.70s; -webkit-animation: star 4s linear infinite;"></i>',movecloud:"<i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i><i></i>",downsnow:'<i class="snow style2" style="left:141.19px; top:147.75px; -webkit-animation-delay:2s; -webkit-animation: snow 6s linear infinite;"></i><i class="snow style2" style="left:-169.13px; top:41.95px; -webkit-animation-delay:1s; -webkit-animation: snow 11s linear infinite;"></i><i class="snow style1" style="left:489.74px; top:90.99px; -webkit-animation-delay:2s; -webkit-animation: snow 9s linear infinite;"></i><i class="snow style3" style="left:307.44px; top:90.83px; -webkit-animation-delay:1s; -webkit-animation: snow 8s linear infinite;"></i><i class="snow style2" style="left:86.18px; top:-50.79px; -webkit-animation-delay:1s; -webkit-animation: snow 15s linear infinite;"></i><i class="snow style2" style="left:-112.58px; top:183.52px; -webkit-animation-delay:3s; -webkit-animation: snow 11s linear infinite;"></i><i class="snow style2" style="left:385.81px; top:208.92px; -webkit-animation-delay:1s; -webkit-animation: snow 11s linear infinite;"></i><i class="snow style3" style="left:233.53px; top:114.95px; -webkit-animation-delay:2s; -webkit-animation: snow 14s linear infinite;"></i><i class="snow style3" style="left:336.33px; top:135.35px; -webkit-animation-delay:3s; -webkit-animation: snow 6s linear infinite;"></i><i class="snow style3" style="left:-276.05px; top:-8.17px; -webkit-animation-delay:1s; -webkit-animation: snow 7s linear infinite;"></i><i class="snow style2" style="left:-10.47px; top:30.62px; -webkit-animation-delay:1s; -webkit-animation: snow 6s linear infinite;"></i><i class="snow style2" style="left:428.50px; top:217.27px; -webkit-animation-delay:1s; -webkit-animation: snow 5s linear infinite;"></i><i class="snow style1" style="left:-171.05px; top:106.67px; -webkit-animation-delay:1s; -webkit-animation: snow 14s linear infinite;"></i><i class="snow style2" style="left:360.00px; top:-13.02px; -webkit-animation-delay:2s; -webkit-animation: snow 14s linear infinite;"></i><i class="snow style3" style="left:-25.45px; top:-43.11px; -webkit-animation-delay:3s; -webkit-animation: snow 7s linear infinite;"></i><i class="snow style3" style="left:-130.18px; top:-23.65px; -webkit-animation-delay:1s; -webkit-animation: snow 8s linear infinite;"></i><i class="snow style3" style="left:377.75px; top:158.70px; -webkit-animation-delay:2s; -webkit-animation: snow 14s linear infinite;"></i><i class="snow style2" style="left:-85.42px; top:120.13px; -webkit-animation-delay:2s; -webkit-animation: snow 7s linear infinite;"></i><i class="snow style1" style="left:-71.95px; top:-48.67px; -webkit-animation-delay:1s; -webkit-animation: snow 14s linear infinite;"></i><i class="snow style2" style="left:152.39px; top:-3.57px; -webkit-animation-delay:2s; -webkit-animation: snow 13s linear infinite;"></i><i class="snow style2" style="left:416.88px; top:106.97px; -webkit-animation-delay:2s; -webkit-animation: snow 13s linear infinite;"></i><i class="snow style2" style="left:16.02px; top:18.89px; -webkit-animation-delay:1s; -webkit-animation: snow 10s linear infinite;"></i><i class="snow style3" style="left:408.41px; top:-62.30px; -webkit-animation-delay:2s; -webkit-animation: snow 7s linear infinite;"></i><i class="snow style1" style="left:254.75px; top:30.57px; -webkit-animation-delay:2s; -webkit-animation: snow 14s linear infinite;"></i><i class="snow style4" style="left:161.91px; top:142.91px; -webkit-animation-delay:2s; -webkit-animation: snow 13s linear infinite;"></i><i class="snow style3" style="left:-104.01px; top:-60.52px; -webkit-animation-delay:2s; -webkit-animation: snow 12s linear infinite;"></i><i class="snow style4" style="left:241.77px; top:208.28px; -webkit-animation-delay:3s; -webkit-animation: snow 11s linear infinite;"></i><i class="snow style2" style="left:-150.35px; top:111.75px; -webkit-animation-delay:2s; -webkit-animation: snow 8s linear infinite;"></i><i class="snow style1" style="left:391.62px; top:37.55px; -webkit-animation-delay:3s; -webkit-animation: snow 11s linear infinite;"></i><i class="snow style2" style="left:-257.30px; top:32.77px; -webkit-animation-delay:2s; -webkit-animation: snow 14s linear infinite;"></i>'
},h=function(a){var b=d.obj.$layer,c={typename:"特效图层",name:null,top:null,left:null,rotate:null,effectName:null,backgroundColor:null,type:a,layerType:"layer-effect"};c.name=b.attr("name"),c.top=b.position().top.toFixed(0),c.left=b.position().left.toFixed(0),c.rotate=b.rotationDegrees(),c.effectName=b.attr("class"),c.backgroundColor=b.css("background-color"),f.ifun.basicDataReplace(c),f.ifun.basicSet(b,c),d.obj.$basicSet_box_other.css("display","none"),$("#basicSetBoxEffect").css("display","block"),d.obj.$moreSet.css("display","none"),d.obj.$animateSet.css("display","none"),d.obj.$functionSet.css("display","none"),d.obj.$basic.trigger("click");var h=function(a,c){b.html('<div class="'+a+'">'+c+"</div>"),e.ifun_callback()};$("#basicSetBoxEffectUl").on("click","li",function(){var a=$(this).attr("data");switch(a){case"movestar":h("effect m-animationBox m-meteorShower",g.moveStar);break;case"movecloud":h("effect m-animationBox m-animationCloudBg",g.movecloud);break;case"downsnow":h("effect m-animationBox m-meteorShower",g.downsnow);break;case"flashstar":h("effect m-animationBox m-meteorShower",g.flashStar)}})};b.effectLayer=function(a){h(a)}}),define("layerObjIframe",["objConfig","ifunction","layerObjIfun","functionPlugin","shortcutsSet"],function(a,b,c){var d=a("objConfig"),e=(a("ifunction"),a("layerObjIfun")),f=function(a){var b=d.obj.$layer;d.obj.$element=b.find(".element");var c={typename:"iframe图层",src:null,name:null,top:null,left:null,width:null,height:null,rotate:null,backgroundColor:null,borderColor:null,borderStyle:null,borderWidth:null,opacity:null,borderRadius:null,filterBlur:null,boxShadow:null,animate:null,delayTime:null,playTime:null,playCount:null,textDecoration:null,type:a,layerType:"layer-iframe"};c.name=b.attr("name"),c.src=d.obj.$element.find("iframe").attr("src"),c.top=b.position().top.toFixed(0),c.left=b.position().left.toFixed(0),c.width=b.width(),c.height=b.height(),c.rotate=b.rotationDegrees(),c.opacity=b.css("opacity"),c.filterBlur=b.css("filter"),c.borderColor=d.obj.$element.css("border-color"),c.borderStyle=d.obj.$element.css("border-style"),c.borderWidth=d.obj.$element.css("border-width"),c.boxShadow=d.obj.$element.css("box-shadow"),c.borderRadius=d.obj.$element.css("border-radius"),c.animate=d.obj.$element.attr("class").replace("element ",""),c.backgroundColor=d.obj.$element.css("background-color"),c.delayTime=d.obj.$element.css("-webkit-animation-delay"),c.playTime=d.obj.$element.css("-webkit-animation-duration"),c.playCount=d.obj.$element.css("-webkit-animation-iteration-count"),e.ifun.basicDataReplace(c);var f=d.obj._basicSetBoxIframe;f=f.replace("{{box_width}}",c.width),f=f.replace("{{box_height}}",c.height),$("#basicSetBoxIframe").html(f),d.obj.$basicSet_box_other.css("display","none"),$("#basicSetBoxIframe").css("display","block"),e.ifun.basicSet(b,c),$("#text_box_width").on("change",function(){b.width($(this).val()),d.obj.$selectBox.css("display","none")}),$("#text_box_height").on("change",function(){b.height($(this).val()),d.obj.$selectBox.css("display","none")}),d.obj.$element.find("iframe").attr("src",c.src),$("#iframeSrc").off("change").on("change",function(){d.obj.$element.find("iframe").attr("src",$(this).val())}),e.ifun.moreSet(b,c),e.ifun.animateSet(b,c),d.obj.$moreSet.css("display","block"),d.obj.$animateSet.css("display","block"),d.obj.$functionSet.css("display","block")};b.iframeLayer=function(a){f(a)}}),define("layerObjIfun",["objConfig","ifunction","functionPlugin","shortcutsSet"],function(a,b,c){var d=a("objConfig"),e=a("ifunction"),f=a("functionPlugin"),g=a("shortcutsSet"),h=null,i=function(a){var b=d.obj._basicSetBox;b=b.replace("{{typename}}",a.typename),b=b.replace("{{name}}",a.name),b=b.replace("{{backgroundcolor}}",a.backgroundColor.colorHex()),b=b.replace("{{left}}",a.left),b=b.replace("{{top}}",a.top),$("#basicSetBox").html(b)},j=function(a,b){var c=$("#basicSetBox"),f=c.find("input.ctop"),h=c.find("input.cleft");f.on("change",function(){a.css("top",$(this).val()+"px"),d.obj.$selectBox.css("top",$(this).val()-2+"px"),e.ifun_callback()}),h.on("change",function(){a.css("left",$(this).val()+"px"),d.obj.$selectBox.css("left",$(this).val()-2+"px"),e.ifun_callback()});var i=function(){$("#setlayerName_val").on("change",function(){var a=$(this).val();$("#picListUl .active").find(".name").attr("value",a).val(a),d.obj.$layer.attr("name",a),e.ifun_callback()}),d.obj.$picListUl.off("dblclick.changeLayerName").on("dblclick.changeLayerName",".name",function(){var a=$(this);a.removeAttr("disabled").css({background:"#FFF",color:"#000"})}),d.obj.$picListUl.off("focusout.changeLayerName").on("focusout.changeLayerName",".name",function(){$(this).attr("disabled","disabled").removeAttr("style");var a=$(this).val();$("#setlayerName_val").attr("value",a).val(a),d.obj.$layer.attr("name",a),e.ifun_callback()})};if(i(),g.iniShortcutsLayer(a,f,h),"layer-pic"==b.layerType||"layer-text"==b.layerType)var j=d.obj.$element;else var j=a;var k=$("#layerBackgroundColor");k.on("change",function(){j.css("background-color",$(this).val().colorHex()),e.ifun_callback()});var l=$("#clear_layerBackgroundColor");l.on("click",function(){k.val("#000000"),j.css("background-color","initial"),e.ifun_callback()}),d.obj.$basic.trigger("click")},k=function(a,b){if("layer-pic"==b.layerType||"layer-text"==b.layerType)var c=d.obj.$element;else var c=a;f.iniPluginDom(c);var g=function(a,b){var c=d.obj.$rotate_pageSlider.next(".slider-input"),f=function(b){c.val(b),a.css("-webkit-transform","rotate("+b+"deg)"),d.obj.$selectBox.css("-webkit-transform","rotate("+b+"deg)"),e.ifun_callback()},g=function(a){f(a)},h=function(a){d.obj.$rotate_pageSlider.sliderMt({slider_callback:g,input_callback:h,iniData:a}),f(a)},i=b.rotate;d.obj.$rotate_pageSlider.sliderMt({slider_callback:g,input_callback:h,iniData:i}),c.val(i)};g(a,b),h=g;var i=function(){var a=d.obj.$radius_pageSlider.next(".slider-input"),f=function(b){a.val(b),c.css("border-radius",b+"px"),e.ifun_callback()},g=function(a){f(a)},h=function(a){d.obj.$radius_pageSlider.sliderMt({slider_callback:g,input_callback:h,iniData:a}),f(a)},i=parseInt(b.borderRadius);d.obj.$radius_pageSlider.sliderMt({slider_callback:g,input_callback:h,iniData:i}),a.val(i)};i();var j=function(){var c=d.obj.$opacity_pageSlider.next(".slider-input"),f=function(b){c.val(b),a.css("opacity",b/100),e.ifun_callback()},g=function(a){f(a)},h=function(a){d.obj.$opacity_pageSlider.sliderMt({slider_callback:g,input_callback:h,iniData:a}),f(a)},i=parseInt(100*b.opacity);d.obj.$opacity_pageSlider.sliderMt({slider_callback:g,input_callback:h,iniData:i}),c.val(i)};j();var k=function(){var c=d.obj.$fuzzy_pageSlider.next(".slider-input"),f=function(b){c.val(b),a.css("-webkit-filter","blur("+b+"px)"),e.ifun_callback()},g=function(a){f(a)},h=function(a){d.obj.$fuzzy_pageSlider.sliderMt({slider_callback:g,input_callback:h,iniData:a}),f(a)},i=parseInt(b.filterBlur);i||(i=0),d.obj.$fuzzy_pageSlider.sliderMt({slider_callback:g,input_callback:h,iniData:i}),c.val(i)};k();var l=function(){var a=d.obj.$sadow_pageSlider.next(".slider-input"),f=function(b){a.val(b),c.css("-webkit-box-shadow","0 0 "+b+"px rgba(0,0,0,0.6)"),e.ifun_callback()},g=function(a){f(a)},h=function(a){d.obj.$sadow_pageSlider.sliderMt({slider_callback:g,input_callback:h,iniData:a}),f(a)},i=0;"none"!=b.boxShadow&&(i=parseInt(b.boxShadow.split(")")[1].split(" ")[3])),d.obj.$sadow_pageSlider.sliderMt({slider_callback:g,input_callback:h,iniData:i}),a.val(i)};l();var m=d.obj.$element.css("border-style"),n=parseInt(d.obj.$element.css("border-width"));$("#borderType_span").attr("data",m).html(function(){switch(m){case"none":return"无边框";case"solid":return"—— 实线";case"dotted":return"......... 点线";case"dashed":return"- - -&nbsp; 虚线";case"double":return"=== 双线"}}),$("#borderPx_span").attr("data",n).html(n+"px"),$("#borderColor").val(d.obj.$element.css("border-color").colorHex());var o=function(a){d.obj.$element.css("border-style",a),d.obj.$selectBox.css("display","none"),e.ifun_callback()};d.obj.$borderType.donwSelectMt({callback:o});var p=function(a){d.obj.$element.css("border-width",a+"px"),d.obj.$selectBox.css("display","none"),e.ifun_callback()};d.obj.$borderPx.donwSelectMt({callback:p}),$("#borderColor").on("change",function(){d.obj.$element.css("border-color",$(this).val().colorHex()),e.ifun_callback()})},l=function(a,b){var a=d.obj.$element;$("#playCount_data").attr("data",b.playCount).html(b.playCount);var c=function(b){e.reSetStyle("-webkit-animation-iteration-count",b,a),e.ifun_callback()};d.obj.$playCount.donwSelectMt({callback:c});var f=function(){var c=d.obj.$playTime_pageSlider.next(".slider-input"),f=function(b){c.val(b),e.reSetStyle("-webkit-animation-duration",b,a),e.ifun_callback()},g=function(a){f(a)},h=function(a){d.obj.$playTime_pageSlider.sliderMt({slider_callback:g,input_callback:h,iniData:a}),f(a)},i=parseFloat(b.playTime);d.obj.$playTime_pageSlider.sliderMt({slider_callback:g,input_callback:h,iniData:i}),c.val(i)};f();var g=function(){var c=d.obj.$delayTime_pageSlider.next(".slider-input"),f=function(b){c.val(b),e.reSetStyle("-webkit-animation-delay",b,a),e.ifun_callback()},g=function(a){f(a)},h=function(a){d.obj.$delayTime_pageSlider.sliderMt({slider_callback:g,input_callback:h,iniData:a}),f(a)},i=parseFloat(b.delayTime);d.obj.$delayTime_pageSlider.sliderMt({slider_callback:g,input_callback:h,iniData:i}),c.val(i)};g();var h=$(".animate-name"),i=d.obj.$element.attr("elementName");void 0==i?h.html("无动画"):h.html(d.obj.$element.attr("elementName"));var j=(d.obj.$animatesLists.find("li"),d.obj.$element);d.obj.$animatesLists.off("click").on("click","li",function(){d.obj.$selectBox.css("display","none");var a=$(this),c={data:a.attr("data"),name:a.attr("name")};if("layer-text"==b.layerType&&-1!=j.attr("class").indexOf("layer-text-center")){j.removeClass().hide(0);var i="element layer-text-center "+c.data}else{j.removeClass().hide(0);var i="element "+c.data}j.addClass(i).attr("elementName",c.name).show(0),b.playTime=j.css("-webkit-animation-duration"),b.delayTime=j.css("-webkit-animation-delay"),g(),f(),h.html(c.name),e.reSetStyle(null,c,a),e.ifun_callback()})};b.ifun={rotateLayer:function(a,b){h(a,b)},basicSet:function(a,b){j(a,b)},moreSet:function(a,b){k(a,b)},basicDataReplace:function(a){i(a)},animateSet:function(a,b){l(a,b)}}}),define("layerObjPic",["objConfig","ifunction","layerObjIfun","functionPlugin","shortcutsSet"],function(a,b,c){var d=a("objConfig"),e=a("ifunction"),f=a("layerObjIfun"),g=function(a,b){var c={width:a.attr("realsize").split(",")[0],height:a.attr("realsize").split(",")[1]},f=parseInt(b.width/c.width*100);f>200&&(f=200);var g=$("#zoom_pageSlider"),h=g.next(".slider-input"),i=function(b){h.val(b);var f=b/100*c.width,g=b/100*c.height;a.css({width:f,height:g}),d.obj.$selectBox.css({width:f+4,height:g+4}),e.ifun_callback()},j=function(a){g.sliderMt({slider_callback:k,input_callback:j,iniData:a}),i(a)},k=function(a){i(a)};g.sliderMt({slider_callback:k,input_callback:j,iniData:f}),h.val(f)},h=function(a){var b=d.obj.$layer;d.obj.$element=b.find(".element");var c={typename:"图片图层",name:null,url:null,top:null,left:null,width:null,height:null,rotate:null,borderColor:null,borderStyle:null,borderWidth:null,backgroundColor:null,opacity:null,borderRadius:null,filterBlur:null,boxShadow:null,animate:null,delayTime:null,playTime:null,playCount:null,type:a,layerType:"layer-pic"};c.name=b.attr("name"),c.url=b.find(".element").attr("src"),c.top=parseInt(b.css("top")),c.left=parseInt(b.css("left")),c.width=b.width(),c.height=b.height(),c.rotate=b.rotationDegrees(),c.opacity=b.css("opacity"),c.filterBlur=b.css("filter"),c.borderColor=d.obj.$element.css("border-color"),c.borderStyle=d.obj.$element.css("border-style"),c.borderWidth=d.obj.$element.css("border-width"),c.boxShadow=d.obj.$element.css("box-shadow"),c.borderRadius=d.obj.$element.css("border-radius"),c.backgroundColor=d.obj.$element.css("background-color"),c.animate=d.obj.$element.attr("class").replace("element ",""),c.delayTime=d.obj.$element.css("-webkit-animation-delay"),c.playTime=d.obj.$element.css("-webkit-animation-duration"),c.playCount=d.obj.$element.css("-webkit-animation-iteration-count"),f.ifun.basicDataReplace(c);var e=d.obj._basicSetBoxPic;e=e.replace("{{url}}",c.url),d.obj.$basicSet_box_other.css("display","none"),$("#basicSetBoxPic").html(e).css("display","block"),$("#changeLayerImage").showWindow({id:"resources",center:!1}),$("#changeImageClear").on("click",function(){$("#picListUl .active .del").trigger("click")}),g(b,c),f.ifun.basicSet(b,c),f.ifun.moreSet(b,c),f.ifun.animateSet(b,c),d.obj.$moreSet.css("display","block"),d.obj.$animateSet.css("display","block"),d.obj.$functionSet.css("display","block")};b.picLayer=function(a){h(a)},b.zoomPic=function(a,b){g(a,b)}}),define("layerObjSlider",["objConfig","ifunction","layerObjIfun","functionPlugin","shortcutsSet"],function(a,b,c){var d=a("objConfig"),e=a("ifunction"),f=a("layerObjIfun"),g=function(a){var b=d.obj.$layer,c={typename:"幻灯片",name:null,top:null,left:null,backgroundColor:null,type:a,layerType:"layer-slider",pics:[]};c.name=b.attr("name"),c.top=b.position().top.toFixed(0),c.left=b.position().left.toFixed(0),c.backgroundColor=b.css("background-color"),b.find("li").each(function(){c.pics.push('<li><i class="iconfont icon-close"></i>'+$(this).html()+"</li>")}),f.ifun.basicDataReplace(c),f.ifun.basicSet(b,c);var g=d.obj._basicSetBoxSlider;d.obj.$basicSet_box_other.css("display","none"),$("#basicSetBoxSlider").html(g).css("display","block");var h=$("#sliderPicsBoxUl");h.html(c.pics),$("#addSliderBtn").off("click.addSliderBtn").on("click.addSliderBtn",function(){h.append('<li><i class="iconfont icon-close"></i><img src="" /></li>'),d.obj.$layer.find("ul").append('<li class="hide"><img src="" /></li>'),e.ifun_callback()}),h.off("click.sliderChangePic").on("click.sliderChangePic","li",function(){d.obj.selectImgResourcesLock=4,$("#resources_btn").trigger("click"),d.obj.$sliderThisImg=$(this).find("img")}),h.off("click.sliderDelPic").on("click.sliderDelPic","i",function(a){a.stopPropagation();var b=$(this).parent();b.remove(),d.obj.$layer.find("li").eq(b.index()).remove(),e.ifun_callback()}),d.obj.$moreSet.css("display","none"),d.obj.$animateSet.css("display","none"),d.obj.$functionSet.css("display","none"),d.obj.$basic.trigger("click")};b.sliderLayer=function(a){g(a)}}),define("layerObjText",["objConfig","ifunction","layerObjIfun","functionPlugin","shortcutsSet"],function(a,b,c){var d=a("objConfig"),e=a("ifunction"),f=a("layerObjIfun"),g=function(a){var b=d.obj.$layer;d.obj.$element=b.find(".element");var c={typename:"文本图层",content:null,name:null,top:null,left:null,width:null,height:null,rotate:null,backgroundColor:null,borderColor:null,borderStyle:null,borderWidth:null,opacity:null,borderRadius:null,filterBlur:null,boxShadow:null,animate:null,delayTime:null,playTime:null,playCount:null,fontSize:null,fontWeight:null,fontStyle:null,textDecoration:null,textAlign:null,color:null,lineHeight:null,letterSpacing:null,type:a,center:"normal",layerType:"layer-text"};c.name=b.attr("name"),c.content=d.obj.$element.find(".el-text").html(),c.top=b.position().top.toFixed(0),c.left=b.position().left.toFixed(0),c.width=b.width(),c.height=b.height(),c.rotate=b.rotationDegrees(),c.opacity=b.css("opacity"),c.filterBlur=b.css("filter"),c.fontSize=b.css("font-size"),c.fontWeight=b.css("font-weight"),c.fontStyle=b.css("font-style"),c.textDecoration=b.css("text-decoration"),c.textAlign=b.css("text-align"),c.textColor=b.css("color"),c.lineHeight=b.css("line-height"),c.letterSpacing=b.css("letter-spacing"),c.borderColor=d.obj.$element.css("border-color"),c.borderStyle=d.obj.$element.css("border-style"),c.borderWidth=d.obj.$element.css("border-width"),c.boxShadow=d.obj.$element.css("box-shadow"),c.borderRadius=d.obj.$element.css("border-radius"),c.animate=d.obj.$element.attr("class").replace("element ",""),c.center=-1!=d.obj.$element.attr("class").indexOf("layer-text-center")?"center":"normal",c.backgroundColor=d.obj.$element.css("background-color"),c.delayTime=d.obj.$element.css("-webkit-animation-delay"),c.playTime=d.obj.$element.css("-webkit-animation-duration"),c.playCount=d.obj.$element.css("-webkit-animation-iteration-count"),f.ifun.basicDataReplace(c),"center"==c.center&&(c.textAlign="normal");var g=d.obj._basicSetBoxText;g=g.replace("{{box_width}}",c.width),g=g.replace("{{box_height}}",c.height),g=g.replace("{{font_bold}}","bolder"==c.fontWeight?"on":""),g=g.replace("{{font_underline}}","underline"==c.textDecoration?"on":""),g=g.replace("{{font_italic}}","italic"==c.fontStyle?"on":""),g=g.replace("{{font_strikethrough}}","line-through"==c.textDecoration?"on":""),g=g.replace("{{font_alignLeft}}","left"==c.textAlign?"on":""),g=g.replace("{{font_alignCenter}}","center"==c.textAlign?"on":""),g=g.replace("{{font_alignRight}}","right"==c.textAlign?"on":""),g=g.replace("{{font_Center}}","center"==c.center?"on":""),g=g.replace("{{fontsize}}",parseInt(c.fontSize)),g=g.replace("{{fontlineHeight}}",isNaN(parseInt(c.lineHeight))?"":parseInt(c.lineHeight)),g=g.replace("{{fontetterSpacing}}",parseInt(c.letterSpacing)),g=g.replace("{{fontcolor}}",c.textColor.colorHex()),$("#basicSetBoxText").html(g),d.obj.$basicSet_box_other.css("display","none"),$("#basicSetBoxText").css("display","block"),f.ifun.basicSet(b,c),$("#text_box_width").on("change",function(){b.width($(this).val()),d.obj.$selectBox.css("display","none")}),$("#text_box_height").on("change",function(){b.height($(this).val()),d.obj.$selectBox.css("display","none")});var h=$("#textLayerArea");h.html(d.obj.$element.find(".el-text").html()),$("#textLayerArea").on("keydown",function(a){a.stopPropagation()}).on("keyup",function(a){var b=h.html();b=b.replace(/style="[^"]*"/g,""),d.obj.$element.find(".el-text").html(b),e.ifun_callback()}),$("#font_bold").on("click",function(){"on"!=$(this).attr("class")?(b.css({"font-weight":"bolder"}),$(this).addClass("on")):(b.css({"font-weight":"normal"}),$(this).removeClass()),e.ifun_callback()});var i=$("#font_underline"),j=$("#font_strikethrough");i.on("click",function(){"on"!=$(this).attr("class")?(b.css({"text-decoration":"underline"}),$(this).addClass("on")):(b.css({"text-decoration":"initial"}),$(this).removeClass()),j.removeClass(),e.ifun_callback()}),j.on("click",function(){"on"!=$(this).attr("class")?(b.css({"text-decoration":"line-through"}),$(this).addClass("on")):(b.css({"text-decoration":"initial"}),$(this).removeClass()),i.removeClass(),e.ifun_callback()}),$("#font_italic").on("click",function(){"on"!=$(this).attr("class")?(b.css({"font-style":"italic"}),$(this).addClass("on")):(b.css({"font-style":"normal"}),$(this).removeClass(),e.ifun_callback())});var k=$("#font_alignLeft"),l=$("#font_alignCenter"),m=$("#font_alignRight"),n=$("#font_Center");k.on("click",function(){"on"!=$(this).attr("class")?(b.css({"text-align":"left"}),$(this).addClass("on")):(b.css({"text-align":"normal"}),$(this).removeClass()),d.obj.$element.removeClass("layer-text-center"),l.removeClass(),m.removeClass(),n.removeClass(),e.ifun_callback()}),l.on("click",function(){"on"!=$(this).attr("class")?(b.css({"text-align":"center"}),$(this).addClass("on")):(b.css({"text-align":"normal"}),$(this).removeClass()),d.obj.$element.removeClass("layer-text-center"),k.removeClass(),m.removeClass(),n.removeClass(),e.ifun_callback()}),m.on("click",function(){"on"!=$(this).attr("class")?(b.css({"text-align":"right"}),$(this).addClass("on")):(b.css({"text-align":"normal"}),$(this).removeClass()),d.obj.$element.removeClass("layer-text-center"),l.removeClass(),k.removeClass(),n.removeClass(),e.ifun_callback()}),n.on("click",function(){"on"!=$(this).attr("class")?(d.obj.$element.addClass("layer-text-center"),$(this).addClass("on")):(d.obj.$element.removeClass("layer-text-center"),$(this).removeClass()),l.removeClass(),k.removeClass(),m.removeClass(),e.ifun_callback()}),$("#font_sizeInput").on("change",function(){b.css({"font-size":$(this).val()+"px"}),e.ifun_callback()}),$("#font_lineHeightInput").on("change",function(){""!=$(this).val()?b.css({"line-height":$(this).val()+"px"}):b.css({"line-height":"normal"}),e.ifun_callback()}),$("#font_letterSpacingInput").on("change",function(){""!=$(this).val()?b.css({"letter-spacing":$(this).val()+"px"}):b.css({"line-height":"normal"}),e.ifun_callback()}),$("#font_color").on("change",function(){b.css("color",$(this).val().colorHex()),e.ifun_callback()}),f.ifun.moreSet(b,c),f.ifun.animateSet(b,c),d.obj.$moreSet.css("display","block"),d.obj.$animateSet.css("display","block"),d.obj.$functionSet.css("display","block")};b.textLayer=function(a){g(a)}}),define("layout",["sizeConfig"],function(a,b,c){var d=a("sizeConfig"),e=function(){$("#center").width(d.size.wind_width-d.size.left_width-d.size.right_width).height(d.size.wind_height-d.size.top_height),$("#left").height(d.size.wind_height-d.size.top_height),$("#pageList").height(d.size.wind_height-d.size.top_height-d.size.addPage_height),$("#right").height(d.size.wind_height-d.size.top_height),$("#cPhone").center2({top:d.size.cPhone_top+"px"}),$("#picList").height(d.size.wind_height-d.size.dataSetHeight-d.size.top_height-d.size.addPage_height-d.size.cutOffRule+10)};$(window).resize(function(){d.size.wind_width=$(window).width(),d.size.wind_height=$(window).height(),e()}),b.initPage=function(){e()}}),define("mouseEventToDrag",["objConfig","mouseEventToDragCallback","layerObj","ifunction","layerObjPic","layerObjIfun","functionPlugin","shortcutsSet","layerObjText","layerObjEffect","layerObjSlider","layerObjIframe"],function(a,b,c){var d=a("objConfig"),e=a("mouseEventToDragCallback"),f=d.obj.$cPhone,g=0;f.on("mousedown.layer",".layer",function(a){g=1,d.obj.$layer=$(this);var b={move:!0,zoom:!0,rotate:!0,zoomXOnly:!1,zoomYOnly:!1,moveYOnly:!1},c=function(){var a={pic:d.obj.$layer.attr("class").indexOf("layer-pic"),effect:d.obj.$layer.attr("class").indexOf("layer-effect"),slider:d.obj.$layer.attr("class").indexOf("layer-slider")};-1!=a.pic&&(b.zoomXOnly=!0),-1!=a.effect&&(b.zoom=!1,b.move=!1),-1!=a.slider&&(b.rotate=!1,b.moveYOnly=!0,b.zoomYOnly=!0)};c();var h=parseFloat(f.css("-webkit-transform").split("(")[1].split(",")[0]),i=d.obj.$picListUl,j=function(){var a=d.obj.$layer.css("z-index");i.find("li").removeClass("active").eq(d.obj.maxZIndex-a-1).addClass("active")};j();var k={x_start:null,y_start:null,x_move:null,y_move:null,x_end:null,y_end:null,p_x:null,p_y:null},l={top:null,left:null,width:null,height:null,zIndex:null,padding:4,rotate:null,borderWidth:null},m=function(c){return l.top=parseInt(d.obj.$layer.css("top")),l.left=parseInt(d.obj.$layer.css("left")),l.width=d.obj.$layer.width(),l.height=d.obj.$layer.height(),l.zIndex=d.obj.$layer.css("z-index"),l.rotate=d.obj.$layer.css("-webkit-transform"),d.obj.$element=d.obj.$layer.find(".element"),void 0!=d.obj.$element.css("border-width")?l.borderWidth=parseInt(d.obj.$element.css("border-width")):l.borderWidth=0,d.obj.$selectBox.css({top:l.top-l.padding/2-1,left:l.left-l.padding/2-1,width:l.width+l.padding+2*l.borderWidth+3,height:l.height+l.padding+2*l.borderWidth+3,display:"block","z-index":l.zIndex,"-webkit-transform":l.rotate}),0==b.move?!1:(k.x_start=a.pageX,k.y_start=a.pageY,k.p_x=parseFloat(d.obj.$layer.css("left"))*h,k.p_y=parseFloat(d.obj.$layer.css("top"))*h,void $(document).on("mousemove.layer",function(a){a.preventDefault(),1==b.moveYOnly?k.x_move=0:k.x_move=a.pageX-k.x_start,k.y_move=a.pageY-k.y_start,d.obj.$layer.css({top:(k.y_move+k.p_y)/h,left:(k.x_move+k.p_x)/h}),l.top=parseInt(d.obj.$layer.css("top")),l.left=parseInt(d.obj.$layer.css("left")),d.obj.$selectBox.css({top:l.top-l.padding/2-1,left:l.left-l.padding/2-1})}).on("mouseup.layer",function(){$(this).off("mousemove.layer mouseup.layer"),null!=k.x_move&&null!=k.y_move&&c()}))};m(e.fun.callback_position);var n=function(a){$("#selectBoxRotate").off("mousedown.selectBoxRotate").on("mousedown.selectBoxRotate",function(c){if(0==b.rotate)return!1;g=1;var e={x_start:null,y_start:null,rotate:null};e.x_start=c.pageX,e.y_start=c.pageY,d.obj.$layer.css("-webkit-transform","rotate(0deg)"),d.obj.$selectBox.css("-webkit-transform","rotate(0deg)"),$(document).on("mousemove.selectBoxRotate",function(a){a.preventDefault(),e.rotate=(a.pageY-e.y_start)/2,d.obj.$layer.css("-webkit-transform","rotate("+e.rotate+"deg)"),d.obj.$selectBox.css("-webkit-transform","rotate("+e.rotate+"deg)")}).on("mouseup.selectBoxRotate",function(){$(this).off("mousemove.selectBoxRotate mouseup.selectBoxRotate"),a()})})};n(e.fun.callback_rotate);var o=function(a){d.obj.$selectBox.off("mousedown.SelectMinToMax").on("mousedown.SelectMinToMax","span",function(c){if(0==b.zoom)return!1;g=1;var e={x_start:null,y_start:null,x_move:null,y_move:null,moveX:null,moveY:null};l.width=d.obj.$layer.width(),l.height=d.obj.$layer.height(),e.x_start=c.pageX,e.y_start=c.pageY;var f=null;$(document).off("keydown.zoom").on("keydown.zoom",function(a){var c=window.event||a,d=c.keyCode||c.which;16==d&&(f=b.zoomXOnly,b.zoomXOnly=!0)}).off("keyup.zoom").on("keyup.zoom",function(){b.zoomXOnly=f}),$(document).on("mousemove.MinToMax",function(a){a.preventDefault(),e.x_move=a.pageX-e.x_start,e.y_move=a.pageY-e.y_start,1==b.zoomXOnly?(e.moveY=l.height*e.x_move/d.obj.speed,e.moveX=l.width*e.x_move/d.obj.speed):1==b.zoomYOnly?(e.moveY=e.y_move,e.moveX=0):(e.moveY=e.y_move,e.moveX=e.x_move),d.obj.$selectBox.css({width:l.width+e.moveX+l.padding+2*l.borderWidth+3,height:l.height+e.moveY+l.padding+2*l.borderWidth+3}),d.obj.$layer.css({width:l.width+e.moveX,height:l.height+e.moveY})}).on("mouseup.MinToMax",function(){$(this).off("mousemove.MinToMax mouseup.MinToMax"),null!=e.x_move&&a()})}).on("mouseup.SelectMinToMax",function(){$(this).off("mousedown.SelectMinToMax mouseup.SelectMinToMax")})};o(e.fun.callback_reWidthAndHeight),e.fun.callback_click(d.obj.$layer)}).on("mouseup.layer",".layer",function(){}),f.on("click.cPhone",function(a){0==g&&$("#selectBox").css("display","none"),g=0})}),define("mouseEventToDragCallback",["objConfig","layerObj","ifunction","layerObjPic","layerObjIfun","functionPlugin","shortcutsSet","layerObjText","layerObjEffect","layerObjSlider","layerObjIframe"],function(a,b,c){var d=a("objConfig"),e=a("layerObj"),f=a("ifunction"),g=a("layerObjPic"),h=a("layerObjIfun"),i=function(a){switch(d.obj.$basic_box.css("display","block"),f.returnLayerTpye()){case"layer-pic":e.layer.pic(a);break;case"layer-text":e.layer.text(a);break;case"layer-slider":e.layer.slider(a);break;case"layer-effect":e.layer.effect(a);break;case"layer-iframe":e.layer.iframe(a);break;case"layer-form":e.layer.form(a);break;default:alert("参数出错")}},j=function(){var a=$("#basicSetBox");a.find("input.ctop").val(parseFloat(d.obj.$layer.css("top")).toFixed(1)),a.find("input.cleft").val(parseFloat(d.obj.$layer.css("left")).toFixed(1))},k=function(){var a=d.obj.$layer,b=function(){var b={width:null};b.width=a.width(),g.zoomPic(a,b)},c=function(){var b={width:null,height:null};b.width=a.width(),b.height=a.height(),$("#text_box_width").val(b.width),$("#text_box_height").val(b.height)};switch(f.returnLayerTpye()){case"layer-pic":b();break;case"layer-text":c()}},l=function(){var a=d.obj.$layer,b={rotate:null};b.rotate=a.rotationDegrees(),h.ifun.rotateLayer(a,b)},m=function(a){if("clickLayer"==a||"clickLi"==a){if($("#layerBg").removeClass("active"),-1!=d.obj.sameIndex&&d.obj.sameIndex==d.obj.$layer.index())return;d.obj.sameIndex=d.obj.$layer.index(),i(a)}else switch(a){case"zoom":k();break;case"rotate":l()}f.ifun_callback()};b.fun={callback_position:function(){m("move"),j()},callback_rotate:function(){m("rotate")},callback_reWidthAndHeight:function(){m("zoom")},callback_click:function(){m("clickLayer")},callback_selectLayerByLi:function(a){m("clickLi")},callback_delLayerByLi:function(a){}}}),define("objConfig",[],function(a,b,c){b.obj={$layer:null,$element:null,$page:null,$cPhone:$("#cPhone"),$picListUl:$("#picListUl"),$pageListUl:$("#pageListUl"),$selectBox:$("#selectBox"),$cPhoneEdit:$("#cPhoneEdit"),userAppId:$("#coolAppAllData").attr("data-userappid"),maxZIndex:1e3,speed:200,sameIndex:-1,selectImgResourcesLock:0,$sliderThisImg:null,slide:'var slide = {	outClass_up : "pt-page-moveToTop",	inClass_up : "pt-page-moveFromBottom",	outClass_down : "pt-page-moveToBottom",	inClass_down : "pt-page-moveFromTop"}',slideNo:1,$historyRecords:$("#historyRecords"),maxRecords:10,$mouseRightBox:$(".mouse-right-btn"),$mouseRightBox_page:$("#mouse-right-btn-pagelist"),$mouseRightBox_layer:$("#mouse-right-btn-layer"),$basic_box:$(".basic_box"),$basic:$("#basic"),$moreSet:$("#moreSet"),$animateSet:$("#animateSet"),$functionSet:$("#functionSet"),$animatesLists:$("#animatesLists"),$animateNav:$("#animatesNav"),$animatesUl:$("ul.animates-ul"),$show_box:$("#show_box"),$play_box:$("#play_box"),$hidde_box:$("#hidde_box"),$other_box:$("#other_box"),$rotate_pageSlider:$("#rotate_pageSlider"),$radius_pageSlider:$("#radius_pageSlider"),$opacity_pageSlider:$("#opacity_pageSlider"),$fuzzy_pageSlider:$("#fuzzy_pageSlider"),$sadow_pageSlider:$("#sadow_pageSlider"),$borderType:$("#borderType_select"),$borderPx:$("#borderPx_select"),$playCount:$("#playCount_select"),$playTime_pageSlider:$("#playTime_pageSlider"),$delayTime_pageSlider:$("#delayTime_pageSlider"),$basicSet_box_other:$(".basicSet_box_other"),_picListUlli:' <li>		<div class="dragdiv">			<div class="eye"><i class="iconfont icon-liulanyanjing" style="display:{{display}}"></i></div>			<div class="info">				{{typeico}}				<input type="text" value="{{name}}" class="name" disabled>				<span></span>				<a href="javascript:void(0)" class="del"><i class="iconfont icon-close"></i></a>			</div>		</div>	</li>',_basicSetBox:'<div class="ps-name-bg border-right">	<p class="title">{{typename}}</p>	<p>名称：<input type="text" value="{{name}}" id="setlayerName_val" class="cname"></p>	<p>底色：<input type="color" id="layerBackgroundColor" list="layerBackgroundColor_list" value="{{backgroundcolor}}">			<datalist id="layerBackgroundColor_list">				<option>#FFFFFF</optison>				<option>#000000</optison>				<option>#ffe600</optison>				<option>#bff800</optison>				<option>#7ff201</optison>				<option>#40f200</optison>				<option>#18f218</optison>				<option>#03ce65</optison>				<option>#00a3a2</optison>				<option>#0469df</optison>				<option>#2540ff</optison>				<option>#4d25ff</optison>				<option>#7a14f3</optison>				<option>#be0dbf</optison>				<option>#f10d58</optison>				<option>#ff330e</optison>				<option>#ff6b01</optison>				<option>#ffb202</optison>				<option>#00c0ff</optison>				<option>#1ba1cd</optison>			</datalist> 			<a id="clear_layerBackgroundColor">清除</a>	</p></div><div class="ps-x-y">	<p class="title">图层位置</p>	<p>X轴：<input type="text" class="cleft" value="{{left}}"> px</p>	<p>Y轴：<input type="text" class="ctop" value="{{top}}"> px</p></div>',_pageBackground:'<div class="picview">    <div class="button">        <a id="changeBackgroundImage"><i class="iconfont icon-ttpodicon2"></i> 更换</a>        <a id="changeBackgroundImageClear"><i class="iconfont icon-icshanchu"></i> 移除</a>    </div>	   <img id="picviewImgObj" src="{{url}}" /></div>',_basicSetBoxPic:'<div class="ms-pageSlider">	  <h5>图片缩放：</h5>	  <div class="s-slider" id="zoom_pageSlider" data="minData:0,maxData:200">  	<div class="s-sliderBar">			<em class="s-slider-bar"></em>			<i class="s-ico-slider"></i>			</div>		</div>		<input class="slider-input" type="text" value="100">		<span class="unit">%</span></div><div class="picview"><div class="button">    <a id="changeLayerImage"><i class="fa fa-refresh"></i> 更换图片</a>    <a id="changeImageClear"><i class="fa fa-trash"></i> 移除图片</a></div>	   <img id="picviewImgObj" src="{{url}}" /></div>',_basicSetBoxSlider:'<div class="set-slider"><ul id="sliderPicsBoxUl" class="clearfix"></ul><a class="addSlider" id="addSliderBtn"><i class="iconfont icon-tianjia"></i> 添加图片</a></div>',_basicSetBoxText:'<div class="set-layer-size">	<p>宽：<input type="text" class="cleft" id="text_box_width" value="{{box_width}}"> px</p> 	<p>高：<input type="text" class="cleft" id="text_box_height" value="{{box_height}}"> px</p></div><div class="pw-util">    <a id="font_bold" class="{{font_bold}}"><i class="fa fa-bold"></i></a>    <a id="font_italic" class="{{font_italic}}"><i class="fa fa-italic"></i></a>    <a id="font_underline" class="{{font_underline}}"><i class="fa fa-underline"></i></a>    <a id="font_strikethrough" class="{{font_strikethrough}}"><i class="fa fa-strikethrough"></i></a>    &nbsp;&nbsp;|&nbsp;&nbsp;    <a id="font_alignLeft" class="{{font_alignLeft}}"><i class="fa fa-align-left"></i></a>    <a id="font_alignCenter" class="{{font_alignCenter}}"><i class="fa fa-align-center"></i></a>    <a id="font_alignRight" class="{{font_alignRight}}"><i class="fa fa-align-right"></i></a>    <a id="font_Center" class="{{font_Center}}"><i class="fa fa-navicon"></i></a>    &nbsp;&nbsp;| &nbsp;&nbsp;    <a id="font_link" class="{{font_link}}"><i class="fa fa-chain"></i></a>    <a id="font_breakLink"><i class="fa fa-chain-broken"></i></a>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;    <a id="font_size" class="nobg"><i class="fa fa-font"></i></a>    <input class="fontsize" id="font_sizeInput" type="text" value="{{fontsize}}"> px    <a id="font_lineHeight" class="nobg"><i class="fa fa-text-height"></i></a>    <input class="fontsize" id="font_lineHeightInput" type="text" value="{{fontlineHeight}}"> px    <a id="font_letterSpacing" class="nobg"><i class="fa fa-text-width"></i></a>    <input class="fontsize" id="font_letterSpacingInput" type="text" value="{{fontetterSpacing}}"> px    <span class="color-box">颜色：    	<input type="color" id="font_color" list="font_color_list" value="{{fontcolor}}">        <datalist id="font_color_list">				<option>#FFFFFF</optison>				<option>#000000</optison>				<option>#ffe600</optison>				<option>#bff800</optison>				<option>#7ff201</optison>				<option>#40f200</optison>				<option>#18f218</optison>				<option>#03ce65</optison>				<option>#00a3a2</optison>				<option>#0469df</optison>				<option>#2540ff</optison>				<option>#4d25ff</optison>				<option>#7a14f3</optison>				<option>#be0dbf</optison>				<option>#f10d58</optison>				<option>#ff330e</optison>				<option>#ff6b01</optison>				<option>#ffb202</optison>				<option>#00c0ff</optison>				<option>#1ba1cd</optison>       </datalist>  </span></div><div class="text-area" id="textLayerArea" contenteditable="true"></div>',
_basicSetBoxIframe:'<div class="set-layer-size">	<p>宽：<input type="text" class="cleft" id="text_box_width" value="{{box_width}}"> px</p> 	<p>高：<input type="text" class="cleft" id="text_box_height" value="{{box_height}}"> px</p></div><div class="pw-util">	<input type="text" class="m-input" placeholder="请输入带http:// 的网址" id="iframeSrc" /></div>',slider:{slide1:'var slide = {	outClass_up : "pt-page-moveToTop",	inClass_up : "pt-page-moveFromBottom",	outClass_down : "pt-page-moveToBottom",	inClass_down : "pt-page-moveFromTop"}',slide5:'var slide = {	outClass_up : "pt-page-moveToLeft",	inClass_up : "pt-page-moveFromRight",	outClass_down : "pt-page-moveToRight",	inClass_down : "pt-page-moveFromLeft"}',slide2:'var slide = {	outClass_up : "pt-page-scaleDownUp",	inClass_up : "pt-page-scaleUpCenter",	outClass_down : "pt-page-scaleDownUp",	inClass_down : "pt-page-scaleUpCenter"}',slide6:'var slide = {	outClass_up : "pt-page-scaleDownLeft",	inClass_up : "pt-page-scaleUpCenter",	outClass_down : "pt-page-scaleDownLeft",	inClass_down : "pt-page-scaleUpCenter"}',slide3:'var slide = {	outClass_up : "pt-page-rotateOutNewspaper",	inClass_up : "pt-page-rotateInNewspaper",	outClass_down : "pt-page-rotateOutNewspaper",	inClass_down : "pt-page-rotateInNewspaper"}',slide4:'var slide = {	outClass_up : "pt-page-rotateCarouselTopOut",	inClass_up : "pt-page-rotateCarouselTopIn",	outClass_down : "pt-page-rotateCarouselBottomOut",	inClass_down : "pt-page-rotateCarouselBottomIn"}',slide7:'var slide = {	outClass_up : "pt-page-rotateCarouselRightOut",	inClass_up : "pt-page-rotateCarouselRightIn",	outClass_down : "pt-page-rotateCarouselLeftOut",	inClass_down : "pt-page-rotateCarouselLeftIn"}',slide8:'var slide = {	outClass_up : "pt-page-rotateCubeRightOut2",	inClass_up : "pt-page-rotateCubeRightIn2",	outClass_down : "pt-page-rotateCubeLeftOut2",	inClass_down : "pt-page-rotateCubeLeftIn2"}',slide9:'var slide = {	outClass_up : "pt-page-rotateCubeTopOut3",	inClass_up : "pt-page-rotateCubeTopIn3",	outClass_down : "pt-page-rotateCubeDownOut3",	inClass_down : "pt-page-rotateCubeDownIn3"}'}}}),define("pageListEvent",["objConfig","ifunction","upLoadMoban"],function(a,b,c){function d(){var b=function(){$("#pageListUl").on("click","li a.del",function(){$(this).parent().remove()})},c=function(){e.obj.$pageListUl.on("click.selectPageListUl","li",function(){e.obj.$historyRecords.html(""),$("#pageListUl li").removeClass("active"),$(this).addClass("active"),e.obj.$page=$(this),e.obj.sameIndex=-1,e.obj.$moreSet.css("display","none"),e.obj.$animateSet.css("display","none"),e.obj.$functionSet.css("display","none");var a=$(this).find("input").attr("data-html");e.obj.$cPhoneEdit.html(a);var b=function(){var a=e.obj.$cPhoneEdit.find(".layer"),b=[];a.each(function(){var a=$(this),c={name:a.attr("name"),type:a.attr("class"),onClick:a.attr("onClick"),display:a.css("display"),zIndex:a.css("z-index")};-1!=c.type.indexOf("layer-pic")?c.type='<i class="fa fa-file-picture-o"></i>':-1!=c.type.indexOf("layer-text")?c.type='<i class="fa fa-font"></i>':-1!=c.type.indexOf("layer-effect")?c.type='<i class="fa fa-magic"></i>':-1!=c.type.indexOf("layer-slider")?c.type='<i class="fa fa-stack-overflow"></i>':-1!=c.type.indexOf("layer-iframe")?c.type='<i class="iconfont icon-xinjian"></i>':-1!=c.type.indexOf("layer-form")?c.type='<i class="fa fa-stack-overflow"></i>':alert("什么鬼类型？没找到！"),"none"==c.display?c.display="none":c.display="inline-block";var d=e.obj._picListUlli;d=d.replace("{{name}}",c.name),d=d.replace("{{typeico}}",c.type),d=d.replace("{{display}}",c.display),b[e.obj.maxZIndex-c.zIndex-1]=d}),e.obj.$picListUl.html(b),e.obj.$selectBox.css("display","none")};b(),e.obj.$layer=$("#cPhoneEdit .warp"),$("#layerBg").trigger("click")})},d=function(){$("#clonePageButton").on("click",function(){var a=$("#pageListUl");void 0!=a.find(".active")[0]?(a.append(a.find(".active").clone().removeClass("active")),$("#pageListUl").find("li").last().trigger("click")):alert("请先选中页面，再复制！")})},f=function(){var b=$("#addMbPageButton");b.showWindow({id:"pageTemplate",center:!1}),a("upLoadMoban").upLoadMoban(),$(".addNewPageBoxUl").on("click","li",function(){var a=$(this),b=a.attr("data-html");"blank"==b?$("#pageListUl").append('<li><div class="dragdiv"><input type="text" value="未命名" class="name" disabled data-html="<div class=\'wrap\' style=\'background-color:#fff;\'></div>"></div><a href="javascript:void(0)" class="del"><i class="fa fa-times"></i></a></li>'):$("#pageListUl").append("<li><div class='dragdiv'><input type='text' value='未命名' class='name' disabled data-html='"+b+"'></div><a href='javascript:void(0)' class='del'><i class='fa fa-times'></i></a></li>"),$("#pageListUl").find("li").last().trigger("click"),$("#pageTemplate a.close").trigger("click")}),$("#fixedBox").on("click",function(){$("#pageTemplate a.close").trigger("click")})},g=function(){$("#pageListUl").off("dblclick.changePageName").on("dblclick.changePageName",".name",function(){var a=$(this);a.removeAttr("disabled").css({background:"#FFF",color:"#222430",border:"1px dashed #03a9f4"})}),$("#pageListUl").off("focusout.changePageName").on("focusout.changePageName",".name",function(){$(this).attr("disabled","disabled").removeAttr("style"),$(this).attr("value",$(this).val())})};g();var h=function(){b(),c(),f(),d()};h()}var e=a("objConfig");a("ifunction");b.pageListEvent=function(){d()}}),define("selectLayerByLi",["objConfig","mouseEventToDragCallback","layerObj","ifunction","layerObjPic","layerObjIfun","functionPlugin","shortcutsSet","layerObjText","layerObjEffect","layerObjSlider","layerObjIframe"],function(a,b,c){function d(a){f.obj.$picListUl.on("click.selectLayerByLi","li",function(){if(1==h)return h=0,!1;var b={$this:$(this),index:null,$cPhone:f.obj.$cPhone,$layers:null,layerType:null,zIndex:null};$("#picListUl li").removeClass("active"),b.$this.addClass("active"),$("#layerBg").removeClass("active"),b.index=b.$this.index(),b.zIndex=f.obj.maxZIndex-b.index-1,b.$layers=b.$cPhone.find(".layer");var c=function(){b.$layers.each(function(){var a=$(this);a.css("z-index")==b.zIndex&&(f.obj.$layer=a)})};c();var d=function(){var a={top:null,left:null,width:null,height:null,zIndex:null,padding:4,rotate:null};a.top=parseInt(f.obj.$layer.css("top")),a.left=parseInt(f.obj.$layer.css("left")),a.width=f.obj.$layer.width(),a.height=f.obj.$layer.height(),a.zIndex=f.obj.$layer.css("z-index"),a.rotate=f.obj.$layer.css("-webkit-transform"),f.obj.$selectBox.css({top:a.top-a.padding/2,left:a.left-a.padding/2,width:a.width+a.padding,height:a.height+a.padding,display:"block","z-index":a.zIndex,"-webkit-transform":a.rotate})};d(),a(b.$this)})}function e(a){f.obj.$picListUl.on("click.dellayer","a.del",function(){h=1;var b=$(this).parent().parent().parent(),c=b.index();f.obj.$picListUl.find("li").eq(c).remove(),f.obj.$moreSet.css("display","none"),f.obj.$animateSet.css("display","none"),f.obj.$functionSet.css("display","none"),f.obj.$basic_box.css("display","none"),f.obj.$cPhone.find(".layer").each(function(){var a=$(this);a.css("z-index")==f.obj.maxZIndex-c-1&&(f.obj.$selectBox.css("display","none"),a.remove())}),f.obj.$cPhone.find(".layer").each(function(a){var b=$(this);if(b.css("z-index")<f.obj.maxZIndex-c-1){var d=b.css("z-index");b.css("z-index",parseInt(d)+1)}}),f.obj.sameIndex=-1,a(c)})}var f=a("objConfig"),g=a("mouseEventToDragCallback"),h=0;b.selectLayerByLi=function(){d(g.fun.callback_selectLayerByLi),e(g.fun.callback_delLayerByLi)}}),define("shortcutsSet",["objConfig","ifunction"],function(a,b,c){var d=a("objConfig"),e=a("ifunction"),f=function(){$(document).off("keydown.shortcuts").on("keydown.shortcuts",function(a){var b=window.event||a,c=b.keyCode||b.which;b.ctrlKey&&83==c&&(b.preventDefault(),$("#saveCoolApp").trigger("click")),b.ctrlKey&&80==c&&(b.preventDefault(),$("#seePlay").trigger("click")),116==c&&(b.preventDefault(),$("#seePlay").trigger("click"))})},g=function(a,b,c){var f,g;$(document).off("keydown.moves").on("keydown.moves",function(h){var i=window.event||h,j=i.keyCode||i.which;if(46==j&&($("#picListUl .active .del").trigger("click"),e.ifun_callback()),i.ctrlKey&&67==j&&($("#copyLayerButton").trigger("click"),e.ifun_callback()),37==j||38==j||39==j||40==j){if(i.preventDefault(),f=parseInt(d.obj.$layer.css("top")),g=parseInt(d.obj.$layer.css("left")),i.ctrlKey)switch(j){case 38:f-=10;break;case 40:f+=10;break;case 39:g+=10;break;case 37:g-=10}else switch(j){case 38:f--;break;case 40:f++;break;case 39:g++;break;case 37:g--}a.css({top:f+"px",left:g+"px"}),b.val(f),c.val(g),d.obj.$selectBox.css({top:f-3+"px",left:g-3+"px"}),e.ifun_callback()}})};b.iniShortcutsLayer=function(a,b,c){return g(a,b,c)},b.iniShortcuts=function(){return f()}}),define("sizeConfig",[],function(a,b,c){b.size={left_width:160,right_width:400,top_height:50,addPage_height:50,cPhone_top:40,wind_width:$(window).width(),wind_height:$(window).height(),dataSetHeight:410,cutOffRule:10}}),define("toMaxOrToMin",[],function(a,b,c){var d=function(){var a=$("#cPhone"),b=parseFloat(a.css("-webkit-transform").split("(")[1].split(",")[0]),c=function(){a.css({"-webkit-transform":"scale("+(b+.1)+")"}),b+=.1,b>=2&&(b=2)},d=function(){a.css({"-webkit-transform":"scale("+(b-.1)+")"}),b-=.1,.2>=b&&(b=.2)};$("#seeMin").on("click",function(){d()}),$("#seeMax").on("click",function(){c()}),$("#seeDefault").on("click",function(){a.css({"-webkit-transform":"scale(1)"}),b=1}),$(window).keydown(function(a){switch(a.keyCode){case 187:c();break;case 189:d()}})};b.toMaxOrToMin=function(){d()}}),define("upLoadImgs",["objConfig"],function(require,exports,module){var allObj=require("objConfig"),uploadImgs=function(){var $imgResourcesBox=$(".imgResourcesBox");$("#upResources").zyUpload({width:"100%",height:"auto",itemWidth:"120px",itemHeight:"100px",url:"/upload/source?appId="+allObj.obj.userAppId+"&sourceTypeId=1",multiple:!0,dragDrop:!0,del:!0,finishDel:!0,onSelect:function(a,b){},onDelete:function(a,b){},onSuccess:function(file,response){response=eval("("+response+")"),$imgResourcesBox.append('<li><a href="javascript:void(0)" class="del" data-id="'+response[0].id+'"><i class="fa fa-close"></i></a><img realsize="'+response[0].width+","+response[0].height+'" _src="'+response[0].filePath+'" src="'+response[0].cutPath+'"></li>')},onFailure:function(a){},onComplete:function(a){}})};exports.uploadImgs=function(){uploadImgs()}}),define("upLoadMoban",[],function(a,b,c){var d=function(){var a=$("#addNewOthermoban");$("#allMobanType").on("click","li",function(){var b=$(this);$("#allMobanType li").removeClass("active"),b.addClass("active");var c=$(this).attr("data-id"),d=$(".mobanUl");d.css("display","none"),d.eq(b.index()).css("display","block"),void 0==$(this).attr("data-lock")&&(d.css("display","none"),$(this).attr("data-lock","lock"),$.ajax({url:"/app/findSimpleTemplateByType",data:{typeId:c},dataType:"json",type:"post",success:function(b){if(0==b.length)var c='<li data-html="blank"><i class="fa fa-plus-square"></i><span>空白页面</span></li>';else{var c='<li data-html="blank"><i class="fa fa-plus-square"></i><span>空白页面</span></li>';for(i in b)c+="<li data-html='"+b[i].html+"'><img src='"+b[i].fileUrl+"' /></li>"}a.append('<ul class="mobanUl">'+c+"</ul>")}}))}),$.ajax({url:"/app/findSimpleType",type:"post",async:!1,dataType:"json",success:function(a){var b="";null!=a&&$.each(a,function(c){b+=0==c?"<li class='active' data-id='"+a[c].id+"'>"+a[c].typeName+"</li>":"<li data-id='"+a[c].id+"'>"+a[c].typeName+"</li>"}),$("#allMobanType").html(b),$("#allMobanType .active").trigger("click")}})};b.upLoadMoban=function(){d()}});